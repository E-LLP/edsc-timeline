{"version":3,"sources":["webpack:///webpack/bootstrap 1ffa4b13f487537f23f4","webpack:///./src/js/edsc-timeline.coffee","webpack:///external \"jQuery\"","webpack:///./src/css/edsc-timeline.less?7f43","webpack:///./src/css/edsc-timeline.less","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/js/util/string.js","webpack:///./src/js/util/plugin.coffee","webpack:///./src/js/util/date.js","webpack:///./src/js/util/svg.js","webpack:///./src/js/timeline/draggable.coffee","webpack:///./src/js/timeline/fencepost.coffee"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;GAAA;;;;;AAAA,qBAAQ,CAAR;;AACA,cAAa,oBAAQ,CAAR;;AACb,cAAa,oBAAQ,CAAR;;AACb,YAAW,oBAAQ,CAAR;;AACX,WAAU,oBAAQ,CAAR;;AACV,aAAY,oBAAQ,EAAR;;AACZ,qBAAoB,oBAAQ,EAAR;;AAGpB,cAAa;;AAGb,cAAa;;AAEb,mBAAkB;;AAElB,eAAc;;AAEd,YAAW;;AAEX,mBAAkB,aAAa,eAAb,GAA+B;;AAGjD,eAAc;;AAEd,iBAAgB;;AAEhB,eAAc,gBAAgB;;AAE9B,cAAa,cAAc;;AAE3B,gBAAe,aAAa;;AAE5B,eAAc,aAAa;;AAE3B,iBAAgB,cAAc;;AAE9B,UAAS,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E;;AAET,SAAQ,CAAC;;AACT,SAAQ,CAAC;;AACT,SAAQ;;AACR,SAAQ;;AAER,cAAa,SAAC,IAAD;UAAU,UAAU,CAAC,OAAX,CAAmB,IAAI,CAAC,WAAL,EAAnB,EAAuC,GAAvC,EAA4C,CAA5C,IAAiD,GAAjD,GAAuD,UAAU,CAAC,OAAX,CAAmB,IAAI,CAAC,aAAL,EAAnB,EAAyC,GAAzC,EAA8C,CAA9C;AAAjE;;AACb,aAAY,SAAC,IAAD;UAAU,UAAU,CAAC,OAAX,CAAmB,IAAI,CAAC,UAAL,EAAnB,EAAsC,GAAtC,EAA2C,CAA3C;AAAV;;AACZ,eAAc,SAAC,IAAD;UAAU,MAAO,KAAI,CAAC,WAAL;AAAjB;;AACd,cAAa,SAAC,IAAD;UAAU,YAAY,IAAZ,IAAoB,GAApB,GAA0B,UAAU,IAAV;AAApC;;AACb,cAAa,SAAC,IAAD;UAAU,IAAI,CAAC,cAAL;AAAV;;AACb,cAAa,SAAC,OAAD,EAAU,YAAV,EAAwB,SAAxB;AACX;GAAA,SAAS,CAAC,OAAD;GACT,IAA4B,YAAW,YAAvC;KAAA,MAAM,CAAC,IAAP,CAAY,WAAZ;;UACA;AAHW;;AAKb,UAAS;GACP,CAAC,SAAC,IAAD;YAAU,WAAW,WAAW,IAAX,CAAX,EAA6B,OAA7B,EAAsC;cAAG,WAAW,IAAX;KAAH,CAAtC;GAAV,CAAD,CADO,EAEP,CAAC,SAAC,IAAD;YAAU,WAAW,WAAW,IAAX,CAAX,EAA6B,OAA7B,EAAsC;cAAG,UAAU,IAAV,IAAkB,GAAlB,GAAuB,YAAY,IAAZ,CAAvB,GAA2C,GAA3C,GAAiD,WAAW,IAAX;KAApD,CAAtC;GAAV,CAAD,CAFO,EAGP,CAAC,SAAC,IAAD;YAAU,WAAW,UAAU,IAAV,CAAX,EAA4B,IAA5B,EAAkC;cAAG,YAAY,IAAZ,IAAoB,GAApB,GAA0B,WAAW,IAAX;KAA7B,CAAlC;GAAV,CAAD,CAHO,EAIP,CAAC,SAAC,IAAD;YAAU,WAAW,YAAY,IAAZ,CAAX,EAA8B,KAA9B,EAAqC;cAAG,WAAW,IAAX;KAAH,CAArC;GAAV,CAAD,CAJO,EAKP,CAAC,SAAC,IAAD;YAAU,CAAC,WAAW,IAAX,CAAD;GAAV,CAAD,CALO,EAMP,CAAC,SAAC,IAAD;YAAU,CAAC,WAAW,IAAX,CAAD;GAAV,CAAD,CANO,EAOP,CAAC,SAAC,IAAD;YAAU,CAAC,WAAW,IAAX,CAAD;GAAV,CAAD,CAPO;;;AAUT,eAAc,CACZ,QADY,EAEZ,MAFY,EAGZ,KAHY,EAIZ,OAJY,EAKZ,MALY,EAMZ,MANY,EAOZ,MAPY;;AAUd,eAAc,CACZ,aADY,EAEZ,WAFY,EAGZ,UAHY,EAIZ,YAJY,EAKZ,WALY,EAMZ,aANY,EAOZ,gBAAgB,CAPJ;;AAUR;GACS,2BAAC,MAAD,EAAS,KAAT,EAAgB,MAAhB,EAAwB,KAAxB;KAAS,IAAC,QAAD;KAAO,IAAC,SAAD;KAC3B,IAAC,KAAI,CAAC,EAAN,CAAS,QAAT,EAAmB,IAAC,OAApB,EAA4B,IAA5B;KACA,IAAC,MAAK,CAAC,EAAP,CAAU,QAAV,EAAoB,IAAC,OAArB,EAA6B,IAA7B;KAEA,IAAC,KAAD,GAAQ,OAAO,CAAC,eAAR,CAAwB,MAAxB,EAAgC,KAAhC;KACR,MAAM,CAAC,WAAP,CAAmB,IAAC,KAApB;KACA,IAAC,OAAD;GANW;;+BAQb,UAAS;AACP;KAAC,gBAAD,EAAO,kBAAP,EAAc,oBAAd,EAAsB;KACtB,IAAI,CAAC,GAAL,CAAS,QAAT,EAAmB,MAAnB,EAA2B,IAA3B;KACA,KAAK,CAAC,GAAN,CAAU,QAAV,EAAoB,MAApB,EAA4B,IAA5B;KAEA,IAAI,CAAC,UAAU,CAAC,WAAhB,CAA4B,IAA5B;YACA,IAAC,KAAD,GAAQ;GAND;;+BAQT,SAAQ,SAAC,KAAD;AACN;KAAA,IAAI,IAAI,CAAC,GAAL,CAAS,IAAC,KAAI,CAAC,CAAf,EAAkB,IAAC,MAAK,CAAC,CAAzB;KACJ,QAAQ,IAAI,CAAC,GAAL,CAAS,IAAC,MAAK,CAAC,CAAP,GAAW,IAAC,KAAI,CAAC,CAA1B;KAER,OAAO,CAAC,gBAAR,CAAyB,IAAC,KAA1B,EAAgC,CAAC,CAAC,MAAF,CAAS,EAAT,EAAa,KAAb,EAAoB;OAAC,GAAG,CAAJ;OAAO,OAAO,KAAd;MAApB,CAAhC;YACA;GALM;;;;;;AAQJ;;;GACS,kBAAC,IAAD,EAAO,SAAP,EAAkB,OAAlB;AACX;;OAD6B,UAAQ;;;;;;;;;;KACrC,0CAAM,IAAN,EAAY,SAAZ,EAAuB,OAAvB;KAEA,IAAC,MAAD,GAAS;KAET,IAAC,KAAI,CAAC,QAAN,CAAe,UAAf;KACA,IAAC,KAAI,CAAC,IAAN,CAAW,UAAX,EAAuB,GAAvB;KACA,IAAC,KAAI,CAAC,MAAN,CAAa,IAAC,UAAD,EAAb;KACA,IAAC,KAAI,CAAC,MAAN,CAAa,IAAC,eAAD,EAAb;KAEA,IAAC,MAAD,GAAS;KAET,IAAC,QAAD,2CAA6B;KAE7B,IAAC,MAAD,GAAS;KACT,IAAC,IAAD,GAAO,CAAC,OAAO,CAAC,GAAR,IAAmB,UAApB,IAA8B;KACrC,IAAC,MAAD,GAAS,IAAC,IAAD,GAAO,WAAY,KAAC,MAAD;KAC5B,IAAC,SAAD,GAAY;KAEZ,IAAC,aAAD,GAAgB;KAEhB,IAAC,gBAAD;KAEA,IAAC,KACC,CAAC,EADH,CACM,gBADN,EACwB,IAAC,MAAD,CAAO,aAAP,CADxB,EAC+C,IAAC,cADhD;KAEA,IAAC,KAAI,CAAC,EAAN,CAAS,oBAAT,EAA+B,IAAC,MAAD,CAAO,aAAP,CAA/B,EAAsD,IAAC,kBAAvD;KACA,IAAC,KAAI,CAAC,EAAN,CAAS,mBAAT,EAA8B,IAAC,MAAD,CAAO,aAAP,CAA9B,EAAqD,IAAC,iBAAtD;KACA,IAAC,KAAI,CAAC,EAAN,CAAS,oBAAT,EAA+B,IAAC,MAAD,CAAO,OAAP,CAA/B,EAAgD,IAAC,iBAAjD;KACA,IAAC,KAAI,CAAC,EAAN,CAAS,mBAAT,EAA8B,IAAC,MAAD,CAAO,OAAP,CAA9B,EAA+C,IAAC,gBAAhD;KACA,IAAC,KAAI,CAAC,EAAN,CAAS,kBAAT,EAA6B,IAAC,WAA9B;KAEA,IAAC,KAAI,CAAC,EAAN,CAAS,mBAAT,EAA8B;cAAA,SAAC,CAAD;SAC5B,KAAC,KAAI,CAAC,WAAN,CAAkB,UAAlB;SACA,KAAC,UAAD,GAAa;gBACb,KAAC,aAAD;OAH4B;KAAA,QAA9B;KAIA,IAAC,KAAI,CAAC,EAAN,CAAS,kBAAT,EAA6B;cAAA,SAAC,CAAD;AAC3B;SAAA,UAAU,QAAQ,CAAC,aAAT,CAAyB,CAAC,KAAC,MAAD,CAAO,aAAP,CAAD,IAAuB,QAAhD;SACV,IAA0C,eAA1C;WAAA,KAAC,cAAD,CAAe;aAAA,eAAe,OAAf;YAAf;;SACA,KAAC,KAAI,CAAC,QAAN,CAAe,UAAf;SACA,KAAC,aAAD;gBAGA,WAAW,CAAC;kBAAG,KAAC,UAAD,GAAa;SAAhB,CAAD,CAAX,EAAmC,GAAnC;OAP2B;KAAA,QAA7B;GAnCW;;sBA4Cb,UAAS;KACP,IAAC,KAAI,CAAC,IAAN,CAAW,KAAX,CAAiB,CAAC,MAAlB;KACA,IAAC,KAAI,CAAC,GAAN,CAAU,WAAV;YACA;GAHO;;sBAKT,QAAO;AAGL;KAAC,kBAAD,EAAQ;KACR,OAAO,MAAM;YACb,CAAC,QAAQ,IAAT,EAAe,MAAM,IAArB,EAA2B,WAAY,KAAC,MAAD,GAAS,CAAT,CAAvC;GALK;;sBAOP,YAAW;YACT,IAAC;GADQ;;sBAGX,UAAS;YACP,IAAC;GADM;;sBAGT,OAAM;KACJ,IAAC,KAAI,CAAC,IAAN;KACA,IAAC,WAAD;YACA;GAHI;;sBAKN,OAAM;KACJ,IAAC,KAAI,CAAC,IAAN;KACA,IAAC,WAAD;KACA,IAAC,MAAD;YACA;GAJI;;sBAMN,YAAW,SAAC,EAAD,EAAK,KAAL,EAAY,GAAZ,EAAiB,UAAjB;AACT;KAAA,QAAQ,IAAC,KAAK,GAAE,CAAC,sBAAT,CAAgC,EAAhC;KACR,IAAG,KAAK,CAAC,MAAN,GAAe,CAAlB;OACE,KAAM,GAAE,CAAC,YAAT,CAAsB,OAAtB,EAAiC,CAAC,KAAM,GAAE,CAAC,YAAT,CAAsB,OAAtB,CAAD,IAAgC,GAAhC,GAAkC,CAAC,IAAC,MAAD,CAAO,SAAP,CAAD,CAAnE;cACA,IAAC,OAAD,CAAQ,KAAM,GAAd,EAFF;;GAFS;;sBAMX,OAAM,SAAC,EAAD,EAAK,IAAL;AACJ;KAAA,MAAM,IAAC,QAAD,CAAS,EAAT;KACN,IAAC,aAAD,GAAgB,CAAC,IAAI,CAAC,KAAN,EAAa,IAAI,CAAC,GAAlB,EAAuB,IAAI,CAAC,UAA5B;KAChB,IAAC,MAAM,IAAP,GAAa,CAAC,IAAI,CAAC,KAAN,EAAa,IAAI,CAAC,GAAlB,EAAuB,IAAI,CAAC,UAA5B,EAAwC,IAAI,CAAC,SAA7C,EAAwD,GAAG,CAAC,KAA5D;KACb,IAAC,UAAD,CAAW,EAAX;KACA,IAAC,gBAAD,CAAiB,EAAjB;KAGA,IAAC,UAAD,CAAW,EAAX;YACA,IAAC,gBAAD,CAAiB,EAAjB;GATI;;sBAWN,kBAAiB,SAAC,EAAD;AACf;KAAA,MAAM;AACN;AAAA;;OACE,IAAS,GAAG,CAAC,EAAJ,KAAU,EAAnB;AAAA;;AADF;KAEA,IAAc,WAAd;AAAA;;KAEA,OAA8B,IAAC,MAAM,IAArC,EAAC,WAAD,EAAI,WAAJ,EAAO,WAAP,EAAU,mBAAV,EAAqB;KACrB,wBAAQ,QAAQ;KAEhB,UAAa,GAAG,CAAC,GAAP,GAAoB,SAAK,GAAG,CAAC,GAAJ,GAAU,IAAf,CAApB,GAAkD,SAAK,CAAL;KAC5D,UAAa,GAAG,CAAC,GAAP,GAAoB,SAAK,GAAG,CAAC,GAAJ,GAAU,IAAf,CAApB,GAAkD;KAE5D,eACE,UAAU,IAAC,MAAX,IACE,SAAS,CAAC,MAAV,GAAmB,CADrB,IAC0B,SAAU,UAAS,CAAC,MAAV,GAAmB,CAAnB,CAAsB,GAAhC,GAAqC,IAArC,GAA4C,IAAC;KAEzE,YACE,UAAU,IAAC,IAAX,IACE,SAAS,CAAC,MAAV,GAAmB,CADrB,IAC0B,SAAU,GAAG,GAAb,GAAkB,IAAlB,GAAyB,IAAC;KAEtD,eAAkB,YAAH,GAAqB,KAArB,GAAgC;KAC/C,cAAiB,SAAH,GAAkB,KAAlB,GAA6B;KAC3C,QAAQ,CAAC,cAAT,CAAwB,gBAAc,EAAtC,CAA2C,CAAC,YAA5C,CAAyD,OAAzD,EAAkE,WAAS,YAA3E;KACA,QAAQ,CAAC,cAAT,CAAwB,iBAAe,EAAvC,CAA4C,CAAC,YAA7C,CAA0D,OAA1D,EAAmE,WAAS,WAA5E;YACA;GAxBe;;sBA0BjB,YAAW,SAAC,EAAD;AACT;KAAA,QAAQ,CAAC;AACT;AAAA;;OACE,IAAG,GAAG,CAAC,EAAJ,KAAU,EAAb;SACE,QAAQ;AACR,eAFF;;AADF;KAIA,IAAU,UAAS,CAAC,CAApB;AAAA;;KAEA,OAAO,IAAC;KAER,gDAA0D,CAAC,IAAC,MAAD,GAAS,CAAV,EAAc,IAAC,IAAD,GAAO,CAArB,EAAwB,WAAY,QAAO,CAAP,CAApC,EAA+C,EAA/C,EAAmD,IAAnD,CAA1D,EAAC,eAAD,EAAQ,aAAR,EAAa,oBAAb,EAAyB,mBAAzB,EAAoC;KAEpC,QAAQ,IAAC,KAAK,GAAE,CAAC,sBAAT,CAAgC,EAAhC;KACR,KAAK;KACL,IAAG,KAAK,CAAC,MAAN,GAAe,CAAlB;OACE,KAAK,KAAM;OACX,IAAC,OAAD,CAAQ,EAAR;OACA,EAAE,CAAC,UAAU,CAAC,WAAd,CAA0B,EAA1B,EAHF;MAAA;OAKE,KAAK,IAAC,iBAAD,CAAkB,GAAlB;OACL,IAA0C,QAAQ,CAAlD;SAAA,IAAC,WAAD,CAAY,EAAZ,EAAgB,CAAhB,EAAmB,aAAa,KAAhC;QANF;;AAQA;4BAAK,qBAAW,mBAAS;OACvB,WAAW,IAAC,eAAD,CAAgB,YAAY,IAA5B;OACX,SAAS,IAAC,eAAD,CAAgB,UAAU,IAA1B;OACT,QACE;SAAA,GAAG,QAAH;SACA,GAAG,CADH;SAEA,OAAO,SAAS,QAFhB;SAGA,QAAQ,aAAa,CAHrB;SAIA,IAAI,EAJJ;SAKA,IAAI,EALJ;;OAMF,IAAwC,eAAc,WAAY,QAAO,CAAP,CAAlE;SAAA,KAAM,SAAN,GAAiB,IAAC,MAAD,CAAO,WAAP,EAAjB;;OACA,OAAO,IAAC,iBAAD,CAAkB,MAAlB,EAA0B,KAA1B;OACP,IAAgD,aAAhD;SAAA,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA2B,WAAS,KAApC;;OACA,EAAE,CAAC,WAAH,CAAe,IAAf;AAbF;KAgBA,EAAE,CAAC,YAAH,CAAgB,OAAhB,EAA4B,EAAD,GAAI,GAAJ,GAAM,CAAC,IAAC,MAAD,CAAO,MAAP,CAAD,CAAjC;KAEA,IAAC,OAAM,CAAC,WAAR,CAAoB,EAApB;KAEA,IAAC,gBAAD,CAAiB,EAAjB;YAEA;GA5CS;;sBA8CX,mBAAkB,SAAC,CAAD;AAChB;KAAA,UAAU,EAAE,mBAAF;KACV,OAAO,CAAC,CAAC;KAET,KAAK,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,KAAlC,CAAwC,GAAxC,CAA6C;KAClD,aAAa,IAAC,MAAM,IAAI;KACxB,YAAY,IAAC,MAAM,IAAI;KACvB,QAAQ,EAAE,CAAC,CAAC,aAAa,CAAC,UAAlB;KACR,WAAW,SAAU,MAAK,CAAC,KAAN,CAAY,IAAZ;KACrB,QAAQ,QAAS,GAAT,GAAc;KACtB,OAAO,QAAS,GAAT,GAAc;KACrB,OAAO,CAAC,IAAR,CAAa,QAAb,CAAsB,CAAC,IAAvB,CAA8B,CAAC,IAAC,oBAAD,CAAqB,KAArB,EAA4B,UAA5B,CAAD,IAAyC,MAAzC,GAA8C,CAAC,IAAC,oBAAD,CAAqB,IAArB,EAA2B,UAA3B,CAAD,CAA5E;KAEA,SAAS,IAAI,CAAC,YAAL;KACT,WAAW,MAAM,CAAC,CAAP,GAAW,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC;KACrC,YAAY,WAAW,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;KAC1C,IAAgB,WAAW,CAA3B;OAAA,WAAW,EAAX;;KACA,IAAiC,YAAY,MAAM,CAAC,UAApD;OAAA,YAAY,MAAM,CAAC,WAAnB;;KACA,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAoB,CAAC,CAAC,WAAW,SAAZ,IAAuB,CAAvB,GAA2B,OAAO,CAAC,KAAR,KAAgB,CAA5C,IAAiD,IAArE;KACA,UAAU,MAAM,CAAC;KACjB,cAAc,EAAE,WAAF,CAAc,CAAC,MAAf,EAAuB,CAAC;KACtC,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAmB,CAAC,UAAU,WAAV,GAAyB,EAA1B,IAAgC,IAAnD;YAEA,OAAO,CAAC,IAAR;GAvBgB;;sBAyBlB,kBAAiB,SAAC,CAAD;YACf,EAAE,mBAAF,CAAsB,CAAC,IAAvB;GADe;;sBAGjB,sBAAqB,SAAC,IAAD,EAAO,UAAP;AACnB;KAAA,MAAM,QAAQ,CAAC,cAAT,CAAwB,IAAxB,CAA6B,CAAC,KAA9B,CAAoC,GAApC;KAEN,QAAQ,WAAW,CAAC,OAAZ,CAAoB,UAApB;KACR,IAAG,QAAQ,CAAX;OACE,GAAI,GAAJ,GAAS;OACT,GAAI,GAAJ,GAAS,GAFX;;KAGA,IAAG,QAAQ,CAAX;OACE,GAAI,GAAJ,GAAS,GADX;;KAEA,IAAG,QAAQ,CAAX;OACE,GAAI,GAAJ,GAAS,GADX;;YAGA,GAAG,CAAC,IAAJ,CAAS,GAAT;GAZmB;;sBAcrB,eAAc;AACZ;KAAA,OAAO,IAAC,WAAD,CAAY;OAAA,QAAQ,MAAR;OAAgB,MAAM,MAAtB;MAAZ;KACP,MAAM,IAAC;KACP,GAAG,CAAC,WAAJ,CAAgB,IAAhB;KACA,WAAY;cAAG,GAAG,CAAC,WAAJ,CAAgB,IAAhB;KAAH;KACZ,IAAG,MAAM,CAAC,qBAAV;cACE,MAAM,CAAC,qBAAP,CAA6B,QAA7B,EADF;MAAA;cAGE,WAAW,QAAX,EAHF;;GALY;;sBAUd,UAAS;YACP,IAAC,KAAD,CAAM,IAAC,MAAP;GADO;;sBAGT,OAAM,SAAC,IAAD;AACJ;KAAA,oBAAG,IAAI,CAAE,gBAAN,GAAe,CAAlB;OACE,IAAC,MAAD;;AAAU;cAAA;;wBAAA,CAAC,CAAC,MAAF,CAAS,EAAT,EAAa,GAAb;AAAA;;;OACV,IAAC,gBAAD;OACA,IAAC,oBAAD;OACA,IAAC,OAAD,CAAQ,IAAC,OAAT;OACA,IAAC,MAAD,GAAS;OACT,IAAC,KAAD,GANF;MAAA;OAQE,IAAC,KAAD,GARF;;YASA,IAAC;GAVG;;sBAYN,eAAc,SAAC,CAAD;YACZ,IAAI,IAAC;GADO;;sBAGd,eAAc,SAAC,CAAD;YACZ,IAAC,MAAD,GAAS;GADG;;sBAGd,iBAAgB,SAAC,CAAD;AACd;KAAC,wBAAD,EAAW,kBAAX,EAAkB;YAClB,WAAW,CAAC,IAAI,KAAL,IAAc;GAFX;;sBAIhB,iBAAgB,SAAC,CAAD;AACd;KAAC,wBAAD,EAAW,kBAAX,EAAkB;YAClB,IAAI,CAAC,KAAL,CAAW,CAAC,IAAI,QAAL,IAAiB,KAAjB,GAAyB,KAApC;GAFc;;sBAIhB,SAAQ;KACN,IAAC,KAAI,CAAC,OAAN,CAAc,YAAd;YACA,IAAC,WAAD,CAAY,CAAC,CAAb;GAFM;;sBAIR,UAAS;KACP,IAAC,KAAI,CAAC,OAAN,CAAc,YAAd;YACA,IAAC,WAAD,CAAY,CAAZ;GAFO;;sBAIT,OAAM,SAAC,GAAD;KACJ,IAAG,WAAH;OACE,IAAC,WAAD,CAAY,MAAM,IAAC,MAAnB;cACA,KAFF;MAAA;cAIE,IAAC,OAJH;;GADI;;sBAON,SAAQ,SAAC,GAAD;KACN,IAAG,WAAH;OACE,IAAC,UAAD,CAAW,MAAM,CAAC,IAAC,IAAD,GAAO,IAAC,MAAT,IAAkB,CAAnC;cACA,KAFF;MAAA;cAIE,IAAI,CAAC,KAAL,CAAW,CAAC,IAAC,IAAD,GAAO,IAAC,MAAT,IAAkB,CAA7B,EAJF;;GADM;;sBAOR,aAAY,SAAC,MAAD,EAAS,QAAT;AACV;;OADmB,WAAS,IAAC,OAAD;;KAC5B,IAAC,MAAD,GAAS,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,IAAC,MAAD,GAAS,MAAlB,EAA0B,CAA1B,CAAT,EAAuC,WAAW,CAAC,MAAZ,GAAqB,CAA5D;KAET,IAAC,KAAI,CAAC,WAAN,CAAkB,IAAC,MAAD,CAAO,UAAP,CAAlB,EAAsC,IAAC,MAAD,KAAU,WAAW,CAAC,MAAZ,GAAqB,CAArE;KACA,IAAC,KAAI,CAAC,WAAN,CAAkB,IAAC,MAAD,CAAO,UAAP,CAAlB,EAAsC,IAAC,MAAD,KAAU,CAAhD;KAKA,IAAI,IAAC,eAAD,CAAgB,QAAhB;KAEJ,WAAW,WAAY,KAAC,MAAD;KAEvB,QAAQ,WAAW,IAAC;KAEpB,IAAC,MAAD,GAAS,WAAW,CAAC,QAAQ,CAAC,IAAI,IAAC,SAAN,CAAT;KACpB,IAAC,IAAD,GAAO,IAAC,MAAD,GAAS;KAEhB,IAAC,MAAD,GAAS;KAET,IAAC,MAAD;KACA,IAAC,gBAAD;YACA,IAAC,oBAAD;GAtBU;;sBAwBZ,QAAO,SAAC,EAAD,EAAK,EAAL;AACL;KAAA,IAAI,IAAI,CAAC,GAAL,CAAS,KAAK,IAAC,OAAf,IAAyB,IAA7B;OACE,KAAc,IAAC,UAAf;AAAA;;OACA,KAAK,KAFP;;KAGA,IAAC,OAAD,GAAU;KAEV,OAAO,IAAC;KACR,UAAU,IAAC;KACX,IAAC,OAAD,CAAQ,OAAR;KAEA,IAAG,UAAH;OACE,IAAI,CAAC,OAAL,CAAa,IAAC,gBAAD,CAAiB,UAAjB,CAAb,EAA2C,CAAC,EAAD,EAAK,EAAL,EAAS,WAAY,KAAC,MAAD,GAAS,CAAT,CAArB,CAA3C;OACA,UAAU,IAAC,eAAD,CAAgB,EAAhB;OACV,SAAS,IAAC,eAAD,CAAgB,EAAhB;OAET,OAAO,IAAC,WAAD,CAAY;SAAA,SAAO,IAAC,MAAD,CAAO,WAAP,CAAP;SAA4B,IAAI,OAAhC;QAAZ;OACP,OAAO,CAAC,WAAR,CAAoB,IAApB;OAEA,QAAQ,IAAC,WAAD,CAAY;SAAA,SAAO,IAAC,MAAD,CAAO,WAAP,CAAP;SAA4B,GAAG,MAA/B;QAAZ;OACR,OAAO,CAAC,WAAR,CAAoB,KAApB,EATF;MAAA;OAWE,IAAI,CAAC,OAAL,CAAa,IAAC,gBAAD,CAAiB,aAAjB,CAAb,EAXF;;KAYA,IAAC,aAAD;YACA;GAvBK;;sBAyBP,YAAW,SAAC,IAAD;YACT,IAAC,KAAD,CAAM,IAAC,aAAD,CAAc,IAAC,IAAD,GAAO,IAArB,CAAN;GADS;;sBAGX,iBAAgB,OAAO,CAAC;;sBAExB,aAAY,SAAC,CAAD;AACV;KAAA,QAAQ,IAAC;KACT,MAAM,CAAC,CAAC;KACR,OAAO;KACP,KAAK;KACL,QAAQ;KACR,OAAO;KACP,IAAG,SAAS,CAAC,QAAO,IAAP,IAAe,QAAO,KAAvB,CAAZ;OACE,IAAC,KAAI,CAAC,OAAN,CAAc,UAAd;OACA,OAAO,IAAC,MAAD,GAAS;OAEhB,WAAW,IAAC,WAAD,CAAY,KAAZ,EAAmB,IAAnB,EAAyB,CAAzB;OAEX,IAAG,QAAO,IAAV;SACE,KAAK,IAAC,WAAD,CAAY,KAAZ,EAAmB,IAAnB,EAAyB,CAAC,CAA1B;SACL,KAAK,QAAQ;SACb,KAAK,IAAC,aAAD,CAAc,WAAW,KAAzB,EAHP;QAAA;SAKE,KAAK;SACL,KAAK,IAAC,WAAD,CAAY,KAAZ,EAAmB,IAAnB,EAAyB,CAAzB,IAA8B;SACnC,KAAK,CAAC,IAAC,aAAD,CAAc,KAAK,EAAnB,EAPR;;OASA,IAAG,IAAC,kBAAD,CAAmB,EAAnB,EAAuB,EAAvB,CAAH;SACE,IAAC,KAAD,CAAM,EAAN;gBACA,IAAC,MAAD,CAAO,EAAP,EAAW,EAAX,EAFF;QAfF;;GAPU;;sBA0BZ,oBAAmB,SAAC,KAAD,EAAQ,IAAR;AACjB;AAAA;AAAA;;OACE,IAAe,CAAC,GAAG,CAAC,gBAAL,IAAyB,GAAG,CAAC,gBAAJ,CAAqB,KAArB,EAA4B,IAA5B,CAAxC;AAAA,gBAAO,KAAP;;AADF;YAEA;GAHiB;;sBAKnB,oBAAmB,SAAC,KAAD;AACjB;KAAA,OAAO,KAAK,CAAC;KAEb,KAAK,IAAC,eAAD,CAAgB,KAAhB;KACL,KAAK,IAAC,eAAD,CAAgB,IAAhB,EAAsB,EAAtB;YAEL,CAAC,IAAC,eAAD,CAAgB,EAAhB,CAAD,EAAsB,IAAC,eAAD,CAAgB,EAAhB,IAAsB,CAA5C;GANiB;;sBAQnB,gBAAe,SAAC,CAAD;AACb;KAAA,IAAU,IAAC,UAAX;AAAA;;KACA,IAAC,KAAI,CAAC,OAAN,CAAc,YAAd;KACA,QAAQ,CAAC,CAAC;KACV,MAAgB,IAAC,kBAAD,CAAmB,KAAnB,CAAhB,EAAC,cAAD,EAAQ;KACR,IAAG,IAAC,kBAAD,CAAmB,KAAnB,EAA0B,IAA1B,CAAH;cACE,IAAC,MAAD,CAAO,KAAP,EAAc,IAAd,EADF;;GALa;;sBAQf,oBAAmB,SAAC,CAAD;AACjB;KAAA,QAAQ,CAAC,CAAC;KACV,MAAgB,IAAC,kBAAD,CAAmB,KAAnB,CAAhB,EAAC,cAAD,EAAQ;KACR,KAAO,IAAC,kBAAD,CAAmB,KAAnB,EAA0B,IAA1B,CAAP;cACE,KAAK,CAAC,YAAN,CAAmB,OAAnB,EAA8B,CAAC,IAAC,MAAD,CAAO,YAAP,CAAD,IAAsB,GAAtB,GAAwB,CAAC,IAAC,MAAD,CAAO,SAAP,CAAD,CAAtD,EADF;;GAHiB;;sBAMnB,mBAAkB,SAAC,CAAD;AAChB;KAAA,QAAQ,CAAC,CAAC;YACV,KAAK,CAAC,YAAN,CAAmB,OAAnB,EAA4B,IAAC,MAAD,CAAO,YAAP,CAA5B;GAFgB;;sBAIlB,YAAW,SAAC,MAAD,EAAS,IAAT,EAAe,MAAf,EAAuB,IAAvB;YACT,UAAS,MAAT,IAAS,MAAT,GAAkB,IAAlB,KAA0B,UAAS,IAAT,IAAS,IAAT,GAAgB,IAAhB;GADjB;;sBAGX,SAAQ,SAAC,IAAD;YACN,EAAE,IAAF,CAAO,CAAC,KAAR;GADM;;sBAIR,mBAAkB,OAAO,CAAC;;sBAE1B,aAAY,SAAC,EAAD,EAAK,CAAL,EAAQ,CAAR;KACV,EAAE,CAAC,YAAH,CAAgB,WAAhB,EAA6B,eAAa,CAAb,GAAe,IAAf,GAAmB,CAAnB,GAAqB,GAAlD;YACA;GAFU;;sBAIZ,YAAW;YACT,EAAE,2RAAF;GADS;;sBAcX,iBAAgB;AACd;KAAA,IAAC,IAAD,GAAO,MAAM,IAAC,iBAAD,CAAkB,KAAlB,EAAyB;OAAA,SAAO,IAAC,MAAD,CAAO,SAAP,CAAP;MAAzB;KAEb,SAAS,IAAC,KAAI,CAAC,IAAN,CAAW,IAAC,MAAD,CAAO,QAAP,CAAX,CAA4B,CAAC,KAA7B;KAET,YAAY,IAAC,wBAAD,CAAyB,GAAzB;KACZ,IAAC,WAAD,CAAY,SAAZ,EAAuB,MAAvB,EAA+B,CAA/B;KAEA,MAAM,IAAC,WAAD,CAAY;OAAA,SAAO,IAAC,MAAD,CAAO,aAAP,CAAP;OAA8B,GAAG,CAAjC;OAAoC,IAAI,UAAxC;MAAZ;KACN,IAAC,wBAAD,CAAyB,GAAzB;KACA,IAAC,WAAD,CAAY,GAAZ,EAAiB,MAAjB,EAAyB,CAAzB;KAEA,QAAQ,IAAC,oBAAD,CAAqB,GAArB;KACR,IAAC,WAAD,CAAY,KAAZ,EAAmB,MAAnB,EAA2B,CAA3B;KAEA,UAAU,IAAC,oBAAD,CAAqB,GAArB;KACV,IAAC,WAAD,CAAY,OAAZ,EAAqB,MAArB,EAA6B,CAA7B;KAEA,WAAW,IAAC,gBAAD,CAAiB,GAAjB;KACX,IAAC,WAAD,CAAY,QAAZ,EAAsB,MAAtB,EAA8B,CAA9B;KAEA,GAAG,CAAC,WAAJ,CAAgB,QAAhB;KACA,GAAG,CAAC,WAAJ,CAAgB,GAAhB;KACA,GAAG,CAAC,WAAJ,CAAgB,OAAhB;KACA,GAAG,CAAC,WAAJ,CAAgB,SAAhB;KACA,GAAG,CAAC,WAAJ,CAAgB,KAAhB;KAEA,IAAC,mBAAD,CAAoB,GAApB;KACA,IAAC,qBAAD,CAAsB,GAAtB;YAEA;GA9Bc;;sBAgChB,0BAAyB,SAAC,EAAD;AACvB;KAAA,OAAO;KACP,OAAO,IAAC;KAER,EAAE,EAAF,CAAK,CAAC,EAAN,CAAS,OAAT,EAAkB;cAAA;gBAChB,IAAI,CAAC,OAAL,CAAa,KAAC,gBAAD,CAAiB,gBAAjB,CAAb,EAAiD,EAAjD;OADgB;KAAA,QAAlB;KAGA,YAAgB,cAAU,EAAV,EAAc,IAAC,QAAf;KAEhB,OAAO;KACP,QAAQ;KAER,SAAS,CAAC,EAAV,CAAa,WAAb,EAA0B;cAAA,SAAC,IAAD;AACxB;SAD0B,SAAD,KAAC;SAC1B,UAAU,KAAC;SACX,KAAC,OAAD,CAAQ,OAAR;gBACA,OAAgB,KAAC,uBAAD,CAAwB,OAAxB,EAAiC,MAAM,CAAC,CAAxC,EAA2C,MAAM,CAAC,CAAlD,EAAqD;;;;uBAArD,CAAhB,EAAC,cAAD,EAAO,eAAP;OAHwB;KAAA,QAA1B;KAKA,SAAS,CAAC,EAAV,CAAa,UAAb,EAAyB,SAAC,CAAD;cAAO,KAAK,CAAC,SAAN,CAAgB,CAAhB;KAAP,CAAzB;YACA,SAAS,CAAC,EAAV,CAAa,SAAb,EAAwB,SAAC,CAAD;OACtB,IAAI,CAAC,OAAL,CAAa,iBAAb;cACA,KAAK,CAAC,MAAN,CAAa,CAAb;KAFsB,CAAxB;GAlBuB;;sBAsBzB,uBAAsB,SAAC,GAAD;AACpB;KAAA,aAAa;KAEb,YAAY;OACV,aAAa;cACb,WAAW,CAAC;gBAAG,aAAa;OAAhB,CAAD,CAAX,EAAmC,GAAnC;KAFU;KAIZ,UAAU;cAAA,SAAC,CAAD;AACR;SAAA,YAAY,KAAC,KAAI,CAAC,IAAN,CAAW,KAAC,MAAD,CAAO,YAAP,CAAX,CAAiC;SAC7C,SAAS,KAAC,eAAD,CAAgB,SAAhB;SAET,IAAI,CAAC,CAAC,OAAF,GAAY,GAAG,CAAC,UAAhB,GAA6B;gBACjC,OAAO,KAAC,eAAD,CAAgB,CAAhB;OALC;KAAA;KAOV,WAAW;cAAA,SAAC,MAAD,EAAS,MAAT,EAAiB,IAAjB;AACT;SAAA,KAAc,UAAd;AAAA;;SACA,IAAG,IAAI,CAAC,GAAL,CAAS,MAAT,IAAmB,IAAI,CAAC,GAAL,CAAS,MAAT,CAAtB;WACE,SAAY,SAAS,CAAZ,GAAmB,CAAC,CAApB,GAA2B;WACpC,KAAC,KAAI,CAAC,OAAN,CAAc,YAAd;WACA,KAAC,WAAD,CAAY,MAAZ,EAAoB,IAApB;kBACA,YAJF;UAAA,MAKK,IAAG,WAAU,CAAb;WACH,KAAC,KAAI,CAAC,OAAN,CAAc,WAAd;kBACA,KAAC,KAAD,CAAM,MAAN,EAFG;;OAPI;KAAA;KAYX,UAAU,SAAC,CAAD;AACR;OAAA,SAAS,CAAC,CAAC;OACX,SAAS,CAAC,CAAC;OACX,SAAS,MAAT,EAAiB,MAAjB,EAAyB,QAAQ,CAAR,CAAzB;cACA,CAAC,CAAC,cAAF;KAJQ;KAMV,GAAG,CAAC,gBAAJ,CAAqB,YAArB,EAAmC,OAAnC;KACA,GAAG,CAAC,gBAAJ,CAAqB,gBAArB,EAAuC,OAAvC;KAGA,GAAG,CAAC,gBAAJ,CAAqB,OAArB,EAA8B,SAAC,CAAD;AAC5B;OAAA,IAAU,CAAC,CAAC,IAAF,KAAU,YAApB;AAAA;;OAGA,SAAS,CAAC,CAAC,CAAC;OACZ,SAAS,CAAC,CAAC,CAAC;OACZ,SAAS,MAAT,EAAiB,MAAjB,EAAyB,QAAQ,CAAR,CAAzB;cAEA,CAAC,CAAC,cAAF;KAR4B,CAA9B;KAUA,kBAAkB;KAClB,cAAc;KACd,GAAG,CAAC,gBAAJ,CAAqB,YAArB,EAAmC,SAAC,CAAD;AACjC;OAAA,MAAc,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,OAAO,CAAC,MAAV,KAAoB,CAA/C;AAAA;;OACA,SAAS,CAAC,CAAC,CAAC,OAAQ,GAAE,CAAC,OAAb,GAAuB,CAAC,CAAC,OAAQ,GAAE,CAAC,OAArC,IAAgD;OACzD,OAAO,QAAQ;SAAA,SAAS,MAAT;QAAR;OACP,kBAAkB,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,OAAQ,GAAE,CAAC,OAAb,GAAuB,CAAC,CAAC,OAAQ,GAAE,CAAC,OAA7C;cAClB,CAAC,CAAC,cAAF;KALiC,CAAnC;YAOA,GAAG,CAAC,gBAAJ,CAAqB,WAArB,EAAkC,SAAC,CAAD;AAChC;OAAA,MAAc,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,OAAO,CAAC,MAAV,KAAoB,CAA/C;AAAA;;OACA,SAAS,IAAI,CAAC,GAAL,CAAS,CAAC,CAAC,OAAQ,GAAE,CAAC,OAAb,GAAuB,CAAC,CAAC,OAAQ,GAAE,CAAC,OAA7C,IAAwD;cACjE,SAAS,CAAT,EAAY,CAAC,MAAb,EAAqB,WAArB;KAHgC,CAAlC;GAvDoB;;sBA4DtB,qBAAoB,SAAC,GAAD;AAElB;KAAA,KAAK,GAAG,CAAC,aAAJ,CAAkB,IAAC,MAAD,CAAO,YAAP,CAAlB;KAEL,YAAgB,cAAU,EAAV,EAAc,IAAC,QAAf;KAEhB,KAAK;KACL,SAAS,CAAC,EAAV,CAAa,UAAb,EAAyB;cAAA,SAAC,CAAD;SACvB,KAAK,CAAC,CAAC,MAAM,CAAC;SACd,IAAqB,IAAI,CAAC,GAAL,CAAS,EAAT,IAAe,CAApC;WAAA,KAAC,UAAD,GAAa,KAAb;;gBACA,KAAC,KAAD,CAAM,EAAN,EAAU,KAAV;OAHuB;KAAA,QAAzB;YAIA,SAAS,CAAC,EAAV,CAAa,SAAb,EAAwB;cAAA,SAAC,CAAD;SACtB,KAAK,CAAC,CAAC,MAAM,CAAC;SACd,KAAC,UAAD,GAAa;gBACb,KAAC,KAAD,CAAM,EAAN;OAHsB;KAAA,QAAxB;GAXkB;;sBAgBpB,OAAM,SAAC,EAAD,EAAK,MAAL;AACJ;;OADS,SAAO;;KAChB,IAAoB,sBAApB;OAAA,IAAC,UAAD;;KAEA,QAAQ,IAAC;KACT,MAAM,IAAC;KAEP,OAAO,MAAM;KACb,IAAC,MAAD,GAAS,QAAQ,KAAK,IAAC;KACvB,IAAC,IAAD,GAAO,IAAC,MAAD,GAAS;KAEhB,IAAC,SAAD,GAAY,CAAC,CAAC,IAAC,WAAD,GAAc,EAAf;KAEb,aAAa,IAAC,KAAI,CAAC,IAAN,CAAW,CAAC,IAAC,MAAD,CAAO,YAAP,CAAD,EAAuB,IAAC,MAAD,CAAO,YAAP,CAAvB,EAA6C,IAAC,MAAD,CAAO,cAAP,CAA7C,EAAqE,IAAC,MAAD,CAAO,QAAP,CAArE,CAAsF,CAAC,IAAvF,CAA4F,IAA5F,CAAX;KACb,UAAU,CAAC,IAAX,CAAgB,WAAhB,EAA6B,eAAY,CAAC,CAAC,IAAC,SAAF,GAAa,QAAd,CAAZ,GAAmC,KAAhE;KACA,IAAC,aAAD;KAEA,IAAiB,MAAjB;cAAA,IAAC,WAAD;;GAhBI;;sBAkBN,YAAW;AACT;KAAA,YAAY,IAAC,KAAI,CAAC,IAAN,CAAW,IAAC,MAAD,CAAO,YAAP,CAAX,CAAiC;KAC7C,IAAC,WAAD,GAAc,IAAC,eAAD,CAAgB,SAAhB,EAA2B,QAA3B,IAAuC;KACrD,IAAC,UAAD,GAAa,IAAC;YACd,IAAC,QAAD,GAAW,IAAC;GAJH;;sBAMX,aAAY;KACV,IAAC,gBAAD;YACA,IAAC,WAAD,GAAc,IAAC,UAAD,GAAa,IAAC,QAAD,GAAW;GAF5B;;sBAIZ,0BAAyB,SAAC,GAAD;YACvB,IAAC,iBAAD,GAAoB,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,WAAP,CAAP;MAAvB;GADG;;sBAGzB,sBAAqB,SAAC,GAAD;YACnB,IAAC,aAAD,GAAgB,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,OAAP,CAAP;MAAvB;GADG;;sBAGrB,sBAAqB,SAAC,GAAD;AACnB;KAAA,IAAC,QAAD,GAAW,UAAU,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,SAAP,CAAP;MAAvB;KAErB,IAAC,OAAD,GAAU,OAAO,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,KAAP,CAAP;MAAvB;KACjB,IAAC,WAAD,CAAY,IAAZ,EAAkB,CAAlB,EAAqB,eAArB;KAEA,OAAO,CAAC,WAAR,CAAoB,IAApB;YAEA;GARmB;;sBAUrB,kBAAiB,SAAC,GAAD;AACf;KAAA,IAAC,SAAD,GAAY,WAAW,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,WAAP,CAAP;MAAvB;KAEvB,aAAa,IAAC,iBAAD,CAAkB,MAAlB,EACX;OAAA,SAAO,IAAC,MAAD,CAAO,YAAP,CAAP;OACA,GAAG,KADH;OAEA,GAAG,KAFH;OAGA,OAAO,QAAQ,KAHf;OAIA,QAAQ,QAAQ,KAJhB;MADW;KAOb,IAAC,OAAD,GAAU,OAAO,IAAC,iBAAD,CAAkB,GAAlB;KACjB,IAAC,WAAD,CAAY,IAAZ,EAAkB,CAAlB,EAAqB,UAArB;KAEA,IAAC,KAAD,GAAQ,OAAO,IAAC,iBAAD,CAAkB,GAAlB;KACf,IAAC,WAAD,CAAY,IAAZ,EAAkB,CAAlB,EAAqB,UAArB;KAEA,QAAQ,CAAC,WAAT,CAAqB,UAArB;KACA,QAAQ,CAAC,WAAT,CAAqB,IAArB;KACA,QAAQ,CAAC,WAAT,CAAqB,IAArB;YAEA;GApBe;;sBAsBjB,uBAAsB,SAAC,EAAD,EAAK,SAAL;AACpB;KAAA,IAAI,IAAC,iBAAD,CAAkB,GAAlB,EACF;OAAA,SAAO,IAAC,MAAD,CAAO,WAAP,CAAP;OACA,IAAI,EADJ;OAEA,WAAW,SAFX;MADE;KAIJ,CAAC,CAAC,WAAF,CAAc,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;OAAA,GAAG,6CAAH;MAA1B,CAAd;KACA,CAAC,CAAC,WAAF,CAAc,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;OAAA,GAAG,iDAAH;MAA1B,CAAd;YACA;GAPoB;;sBAStB,kBAAiB;AACf;KAAA,OAAO,IAAC;KACR,UAAU,IAAC;KACX,IAAC,OAAD,CAAQ,OAAR;KACA,IAAI;KAEJ,YAAY,IAAC,iBAAD,CAAkB,GAAlB;AAEZ;;OACE,OAAO,CAAC,WAAR,CAAoB,IAAC,qBAAD,CAAsB,gBAAc,GAAG,CAAC,EAAxC,EAA8C,kBAAgB,CAAhB,GAAkB,GAAhE,CAApB;OACA,OAAO,CAAC,WAAR,CAAoB,IAAC,qBAAD,CAAsB,iBAAe,GAAG,CAAC,EAAzC,EAA+C,eAAY,CAAC,IAAC,MAAD,GAAS,EAAV,CAAZ,GAAyB,IAAzB,GAA4B,CAAC,IAAI,EAAL,CAA5B,GAAoC,eAAnF,CAApB;OAEA,MAAM,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;SAAA,GAAG,EAAH;SAAO,GAAG,CAAV;QAA1B;OACN,GAAG,CAAC,WAAJ,GAAkB,GAAG,CAAC;OACtB,SAAS,CAAC,WAAV,CAAsB,GAAtB;OACA,KAAK;AAPP;KASA,OAAO,CAAC,WAAR,CAAoB,SAApB;KAEA,KAAK;cAAA;AACH;SAAA,OAAO,SAAS,CAAC,OAAV;SACP,OAAO,KAAC,iBAAD,CAAkB,MAAlB,EAA0B;WAAA,GAAG,IAAI,CAAC,CAAR;WAAW,GAAG,CAAC,eAAD,GAAmB,WAAjC;WAA8C,OAAO,IAAI,CAAC,KAA1D;WAAiE,QAAQ,CAAzE;WAA4E,SAAO,KAAC,MAAD,CAAO,QAAP,CAAnF;UAA1B;SACP,IAAkD,OAAO,CAAC,UAA1D;kBAAA,OAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B,OAAO,CAAC,UAAnC;;OAHG;KAAA;KAIL,WAAW,EAAX,EAAe,CAAf;YAEA;GAzBe;;sBA2BjB,kBAAiB;AACf;KAAC,gBAAD,EAAO,wBAAP,EAAiB,kBAAjB,EAAwB,cAAxB,EAA6B;KAC7B,OAAO,IAAC;KAER,IAAC,OAAD,CAAQ,IAAR;KAEA,IAAI,CAAC,IAAL,CAAU,IAAV,CAAe,CAAC,IAAhB,CAAqB,WAAY,QAAO,CAAP,CAAjC;KAEA,OAAO,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;OAAA,SAAO,IAAC,MAAD,CAAO,UAAP,CAAP;OAA2B,IAAI,KAA/B;OAAsC,IAAI,CAA1C;OAA6C,IAAI,KAAjD;OAAwD,IAAI,CAA5D;MAA1B;KACP,IAAI,CAAC,WAAL,CAAiB,IAAjB;KAEA,UAAU,IAAI,CAAC,KAAL;KACV,IAA+B,YAAW,CAA1C;OAAA,UAAU,EAAE,MAAF,CAAS,CAAC,KAAV,GAAV;;KAEA,IAAC,MAAD,GAAS,QAAQ,UAAU,IAAI,CAAC,IAAL,CAAU,IAAC,MAAD,CAAO,QAAP,CAAV,CAA2B,CAAC,KAA5B;KAC3B,IAAC,MAAD,GAAS,CAAC,MAAM,KAAP,IAAgB;KAEzB,QAAQ,IAAC,MAAD;KAER,IAAC,eAAD,CAAgB,KAAM,GAAtB,EAA0B,KAAM,GAAhC,EAAoC,OAAO,CAA3C;AAEA;AAAA;;;OACE,IAAC,UAAD,CAAW,CAAX;AADF;KAGA,aAAa,KAAM;KACnB,OAA6C,IAAC,aAA9C,EAAC,qBAAD,EAAc,mBAAd,EAAyB;KACzB,MAAO,qBAAoB,UAApB,IAAkC,IAAC,UAAD,CAAW,WAAX,EAAwB,SAAxB,EAAmC,KAAnC,EAA0C,GAA1C,CAAzC;AACE;AAAA;;SACE,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA6B,CAAC,IAAI,CAAC,YAAL,CAAkB,OAAlB,CAAD,IAA4B,GAA5B,GAA8B,CAAC,IAAC,MAAD,CAAO,SAAP,CAAD,CAA3D;AADF,QADF;;YAIA,IAAI,CAAC,OAAL,CAAa,IAAC,gBAAD,CAAiB,aAAjB,CAAb,EAA8C,KAA9C;GA9Be;;sBAgCjB,cAAa,SAAC,MAAD;YACX,IAAC,gBAAD,GAAmB;GADR;;sBAGb,iBAAgB,SAAC,EAAD,EAAK,MAAL;AACd;KAAA,MAAM,IAAC,QAAD,CAAS,EAAT;KACN,IAAG,GAAH;cACE,GAAG,CAAC,QAAJ,GAAe,OADjB;;GAFc;;sBAKhB,UAAS,SAAC,EAAD;AACP;AAAA;AAAA;;OACE,IAAc,GAAG,CAAC,EAAJ,KAAU,EAAxB;AAAA,gBAAO,IAAP;;AADF;YAEA;GAHO;;sBAKT,sBAAqB;AACnB;KAAA,UAAU,IAAC;KACX,OAAO,IAAC;KACR,IAAC,OAAD,CAAQ,OAAR;KAEA,MAAc,IAAI,CAAC,MAAL,GAAc,CAA5B;AAAA;;KAEA,gBAAgB;AAChB;;OACE,IAAG,GAAG,CAAC,QAAP;SACE,IAAC,sBAAD,CAAuB,OAAvB,EAAgC,GAAG,CAAC,QAApC,EAA8C,CAAC,KAAD,CAA9C,EADF;QAAA;SAGE,aAAa,CAAC,IAAd,CAAmB,KAAnB,EAHF;;AADF;KAMA,IAAG,IAAC,gBAAJ;cACE,IAAC,sBAAD,CAAuB,OAAvB,EAAgC,IAAC,gBAAjC,EAAkD,aAAlD,EADF;;GAdmB;;sBAiBrB,yBAAwB,SAAC,OAAD,EAAU,EAAV,EAAc,EAAd,EAAkB,OAAlB;AACtB;KAAA,OAAW,sBAAkB,OAAlB,EAA2B,EAA3B,EAA+B,KAA/B;KACX,QAAY,sBAAkB,OAAlB,EAA2B,EAA3B,EAA+B,KAA/B;KAEZ,SAAS;AACP;OAAA,QAAQ,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAd,EAAiB,KAAK,CAAC,CAAvB;OACR,SAAS,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,CAAd,EAAiB,KAAK,CAAC,CAAvB;OACT,QAAY,SAAK,IAAC,eAAD,CAAgB,KAAhB,CAAL;OACZ,OAAW,SAAK,IAAC,eAAD,CAAgB,MAAhB,CAAL;OACX,IAAC,KAAI,CAAC,OAAN,CAAc,IAAC,gBAAD,CAAiB,gBAAjB,CAAd,EAAkD,KAAlD,EAAyD,IAAzD;cACA;KANO;KAQT,IAAI,CAAC,EAAL,CAAQ,QAAR,EAAkB,MAAlB,EAA0B,IAA1B;KACA,KAAK,CAAC,EAAN,CAAS,QAAT,EAAmB,MAAnB,EAA2B,IAA3B;KACA,IAAI,CAAC,EAAL,CAAQ,QAAR,EAAkB,IAAC,aAAnB,EAAiC,IAAjC;KACA,KAAK,CAAC,EAAN,CAAS,QAAT,EAAmB,IAAC,aAApB,EAAkC,IAAlC;AAEA;;OACM,sBAAkB,OAAlB,EAA2B,IAA3B,EAAiC,KAAjC,EACF;SAAA,SAAO,IAAC,MAAD,CAAO,kBAAP,CAAP;SACA,GAAG,aAAa,aAAa,KAD7B;SAEA,QAAQ,UAFR;QADE;AADN;YAKA,CAAC,IAAD,EAAO,KAAP;GAtBsB;;sBAwBxB,wBAAuB,SAAC,OAAD,EAAU,QAAV,EAAoB,OAApB;AACrB;AAAA;UAAA;0BAAK,gBAAO;oBACV,IAAC,uBAAD,CAAwB,OAAxB,EAAiC,IAAC,eAAD,CAAgB,KAAhB,CAAjC,EAAyD,IAAC,eAAD,CAAgB,IAAhB,CAAzD,EAAgF,OAAhF;AADF;;GADqB;;sBAIvB,aAAY,SAAC,KAAD;KACV,QAAQ,CAAC,CAAC,MAAF,CAAS;OAAC,GAAG,KAAJ;OAAW,IAAI,KAAf;OAAsB,GAAG,KAAzB;OAAgC,IAAI,KAApC;MAAT,EAAqD,KAArD;;OACR,KAAM,YAAY,CAAC,KAAK,CAAC,EAAN,GAAW,KAAK,CAAC,CAAlB,IAAuB;;;OACzC,KAAM,aAAa,CAAC,KAAK,CAAC,EAAN,GAAW,KAAK,CAAC,CAAlB,IAAuB;;KAC1C,OAAO,KAAK,CAAC;KACb,OAAO,KAAK,CAAC;YACb,IAAC,iBAAD,CAAkB,MAAlB,EAA0B,KAA1B;GANU;;sBAQZ,aAAY,SAAC,IAAD,EAAO,IAAP,EAAa,SAAb;AACV;;OADuB,YAAU;;KACjC,OAAO,IAAI,CAAC,KAAL,CAAW,OAAO,IAAlB,IAA0B;KACjC,OAAW,SAAK,IAAL;KACX;;AAAc;AAAA;YAAA;;sBAAA,IAAK,YAAS,CAAT,CAAL;AAAA;;;KACd,aAAa,UAAU,CAAC,KAAX,CAAiB,CAAjB,EAAoB,IAAI,CAAC,GAAL,CAAS,UAAU,CAAC,MAAX,GAAoB,IAA7B,EAAmC,CAAnC,CAApB;KAEb,IAAG,SAAQ,WAAW,CAAC,MAAZ,GAAqB,CAAhC;OACE,UAAW,GAAX,GAAgB,IAAI,CAAC,KAAL,CAAW,UAAW,GAAX,GAAgB,EAA3B,IAAiC;OACjD,aAAa,GAFf;;KAIA,UAAW,WAAU,CAAC,MAAX,GAAoB,CAApB,CAAX,IAAqC;KACrC,IAAsB,UAAU,CAAC,MAAX,KAAqB,CAA3C;OAAA,UAAU,CAAC,IAAX,CAAgB,CAAhB;;YACA,IAAI,CAAC,GAAL,aAAS,UAAT;GAZU;;sBAcZ,iBAAgB,SAAC,KAAD,EAAQ,GAAR,EAAa,IAAb;AACd;KAAA,OAAO,IAAC;KAER,QAAQ,IAAC,WAAD,CAAY,KAAZ,EAAmB,IAAnB;KACR,MAAM,IAAC,WAAD,CAAY,GAAZ,EAAiB,IAAjB;KAEN,OAAO;AAEP;YAAM,QAAQ,KAAd;OACE,OAAW,SAAK,IAAL;OACX,OAAO,IAAC,WAAD,CAAY,IAAZ,EAAkB,IAAlB,EAAwB,CAAC,CAAzB;OACP,OAAO,IAAC,WAAD,CAAY,IAAZ,EAAkB,IAAlB,EAAwB,CAAxB;OACP,WAAW,IAAC,sBAAD,aAAuB,KAAC,eAAD,CAAgB,IAAhB,GAAuB,IAAC,eAAD,CAAgB,IAAhB,CAAuB,0BAAO,MAAP,CAAa,IAAb,GAArE;OACX,IAAI,CAAC,WAAL,CAAiB,QAAjB;oBACA,OAAO;KANT;;GARc;;sBAgBhB,wBAAuB,SAAC,EAAD,EAAK,EAAL,EAAS,IAAT,EAAe,OAAf;AACrB;KAAA,IAAI,IAAC,iBAAD,CAAkB,GAAlB,EAAuB;OAAA,SAAO,IAAC,MAAD,CAAO,YAAP,CAAP;MAAvB;KACJ,IAAC,WAAD,CAAY,CAAZ,EAAe,EAAf,EAAmB,CAAnB;KACA,QAAQ,KAAK;KAEb,IAAG,UAAH;OAEE,KAAK,IAAC,iBAAD,CAAkB,MAAlB,EACH;SAAA,GAAG,CAAH;SACA,GAAG,CADH;SAEA,OAAO,KAFP;SAGA,QAAQ,QAAQ,KAHhB;QADG;OAKL,CAAC,CAAC,WAAF,CAAc,EAAd,EAPF;;KASA,QAAQ,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;OAAA,GAAG,CAAH;OAAM,GAAG,EAAT;OAAa,SAAS,CAAC,IAAC,MAAD,CAAO,YAAP,CAAD,IAAsB,GAAtB,GAAwB,CAAC,IAAC,MAAD,CAAO,kBAAP,CAAD,CAA9C;MAA1B;KACR,KAAK,CAAC,WAAN,GAAoB;KAEpB,YAAY,IAAC,MAAD,CAAO,MAAP;KACZ,IAA+C,OAA/C;OAAA,aAAa,MAAM,IAAC,MAAD,CAAO,gBAAP,EAAnB;;KACA,OAAO,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;OAAA,SAAO,SAAP;OAAkB,IAAI,CAAtB;OAAyB,IAAI,KAA7B;OAAoC,IAAI,CAAxC;OAA2C,IAAI,KAA/C;MAA1B;KAEP,SAAS,IAAC,iBAAD,CAAkB,QAAlB,EAA4B;OAAA,SAAO,IAAC,MAAD,CAAO,eAAP,CAAP;OAAgC,GAAG,CAAnC;OAAsC,IAAI,KAA1C;MAA5B;KAET,CAAC,CAAC,WAAF,CAAc,IAAd;KACA,CAAC,CAAC,WAAF,CAAc,MAAd;KACA,CAAC,CAAC,WAAF,CAAc,KAAd;KAEA,IAAG,OAAH;OACE,WAAW,IAAC,iBAAD,CAAkB,MAAlB,EAA0B;SAAA,GAAG,CAAH;SAAM,GAAG,EAAT;SAAa,SAAS,CAAC,IAAC,MAAD,CAAO,YAAP,CAAD,IAAsB,GAAtB,GAAwB,CAAC,IAAC,MAAD,CAAO,gBAAP,CAAD,CAA9C;QAA1B;OACX,QAAQ,CAAC,WAAT,GAAuB;OACvB,CAAC,CAAC,WAAF,CAAc,QAAd,EAHF;;YAKA;GAhCqB;;sBAkCvB,aAAY;AACV;KAAA,qCAAS,CAAE,gBAAR,GAAiB,CAApB;OACE,aAAa,IAAC,MAAK,CAAC,MAAP,GAAgB,UAAhB,GAA6B,IAAI;OAC9C,IAAC,WAAD,CAAY,IAAC,KAAb,EAAmB,CAAnB,EAAsB,aAAa,UAAnC;OACA,cAAc,IAAI,CAAC,GAAL,CAAS,aAAa,UAAb,GAA0B,WAAnC,EAAgD,GAAhD;OACd,IAAC,KAAI,CAAC,MAAN,CAAa,WAAb;cACA,EAAE,IAAC,IAAH,CAAO,CAAC,MAAR,CAAe,WAAf,EALF;;GADU;;;;IA9xBS,UAAU,CAAC;;AAsyBlC,WAAU,CAAC,MAAX,CAAkB,UAAlB,EAA8B,QAA9B;;;;;;;;ACn5BA,yB;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA,gDAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,wCAAuC,2BAA2B,GAAG,aAAa,kBAAkB,sBAAsB,uBAAuB,kCAAkC,kDAAkD,kBAAkB,GAAG,mBAAmB,kCAAkC,eAAe,GAAG,sBAAsB,kBAAkB,GAAG,mBAAmB,uBAAuB,gBAAgB,WAAW,cAAc,YAAY,eAAe,8BAA8B,uBAAuB,iBAAiB,+CAA+C,+BAA+B,GAAG,sBAAsB,oBAAoB,oBAAoB,cAAc,8BAA8B,mBAAmB,GAAG,qBAAqB,mBAAmB,qBAAqB,wBAAwB,gBAAgB,sBAAsB,eAAe,gBAAgB,sBAAsB,0BAA0B,sBAAsB,uBAAuB,GAAG,2BAA2B,qBAAqB,GAAG,kFAAkF,gBAAgB,oBAAoB,GAAG,qBAAqB,8BAA8B,mBAAmB,uBAAuB,YAAY,WAAW,aAAa,cAAc,gBAAgB,iBAAiB,qCAAqC,GAAG,0BAA0B,eAAe,GAAG,oBAAoB,eAAe,qBAAqB,GAAG,sBAAsB,oBAAoB,oBAAoB,GAAG,kBAAkB,oBAAoB,GAAG,4BAA4B,oBAAoB,GAAG,uBAAuB,kBAAkB,GAAG,0CAA0C,qBAAqB,GAAG,2BAA2B,oBAAoB,eAAe,oBAAoB,GAAG,qBAAqB,oBAAoB,sBAAsB,GAAG,yBAAyB,kBAAkB,oBAAoB,GAAG,wBAAwB,oBAAoB,GAAG,8BAA8B,sBAAsB,GAAG,4BAA4B,sBAAsB,GAAG,uBAAuB,kBAAkB,oBAAoB,GAAG,4BAA4B,iBAAiB,yBAAyB,sBAAsB,GAAG,8BAA8B,qBAAqB,oBAAoB,GAAG,+CAA+C,oBAAoB,GAAG,0DAA0D,kBAAkB,GAAG,0DAA0D,kBAAkB,GAAG,qBAAqB,wBAAwB,GAAG,uBAAuB,yBAAyB,eAAe,qBAAqB,oBAAoB,GAAG,0CAA0C,oBAAoB,GAAG,uBAAuB,sBAAsB,GAAG,qBAAqB,uBAAuB,mBAAmB,oBAAoB,gBAAgB,kBAAkB,GAAG,4BAA4B,wBAAwB,uBAAuB,qBAAqB,wBAAwB,GAAG,yBAAyB,oBAAoB,mBAAmB,GAAG,wCAAwC,cAAc,cAAc,sBAAsB,4BAA4B,8BAA8B,GAAG;;AAE3vG;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AAC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","file":"edsc-timeline.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1ffa4b13f487537f23f4\n **/","require '../css/edsc-timeline.less'\nstringUtil = require('./util/string')\npluginUtil = require('./util/plugin')\ndateUtil = require('./util/date')\nsvgUtil = require('./util/svg')\nDraggable = require('./timeline/draggable')\nTemporalFencepost = require('./timeline/fencepost')\n\n# Height for the top area, where arrows are drawn for date selection\nTOP_HEIGHT = 19\n\n# Height for each row, including any necessary margins\nROW_HEIGHT = 26\n\nROW_FONT_HEIGHT = 14\n\nROW_PADDING = 5\n\nOFFSET_X = 48\n\nROW_TEXT_OFFSET = TOP_HEIGHT + ROW_FONT_HEIGHT + ROW_PADDING\n\n# Height for the axis of the timeline, containing date displays\nAXIS_HEIGHT = 40\n\nMS_PER_MINUTE = 60000\n\nMS_PER_HOUR = MS_PER_MINUTE * 60\n\nMS_PER_DAY = MS_PER_HOUR * 24\n\nMS_PER_MONTH = MS_PER_DAY * 31\n\nMS_PER_YEAR = MS_PER_DAY * 366\n\nMS_PER_DECADE = MS_PER_YEAR * 10\n\nMONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n\nMIN_X = -100000\nMIN_Y = -1000\nMAX_X = 100000\nMAX_Y = 1000\n\nformatTime = (date) -> stringUtil.padLeft(date.getUTCHours(), '0', 2) + ':' + stringUtil.padLeft(date.getUTCMinutes(), '0', 2)\nformatDay = (date) -> stringUtil.padLeft(date.getUTCDate(), '0', 2)\nformatMonth = (date) -> MONTHS[date.getUTCMonth()]\nformatDate = (date) -> formatMonth(date) + ' ' + formatDay(date)\nformatYear = (date) -> date.getUTCFullYear()\naddContext = (dateStr, contextMatch, contextFn) ->\n  result = [dateStr]\n  result.push(contextFn()) if dateStr == contextMatch\n  result\n\nLABELS = [\n  ((date) -> addContext(formatTime(date), '00:00', -> formatDate(date))),\n  ((date) -> addContext(formatTime(date), '00:00', -> formatDay(date) + ' ' +formatMonth(date) + ' ' + formatYear(date))),\n  ((date) -> addContext(formatDay(date), '01', -> formatMonth(date) + ' ' + formatYear(date))),\n  ((date) -> addContext(formatMonth(date), 'Jan', -> formatYear(date))),\n  ((date) -> [formatYear(date)]),\n  ((date) -> [formatYear(date)]),\n  ((date) -> [formatYear(date)])\n]\n\nRESOLUTIONS = [\n  'minute',\n  'hour',\n  'day',\n  'month',\n  'year',\n  'year',\n  'year'\n]\n\nZOOM_LEVELS = [\n  MS_PER_MINUTE,\n  MS_PER_HOUR,\n  MS_PER_DAY,\n  MS_PER_MONTH,\n  MS_PER_YEAR,\n  MS_PER_DECADE,\n  MS_PER_DECADE * 5\n]\n\nclass TemporalSelection\n  constructor: (parent, @left, @right, attrs) ->\n    @left.on 'update', @update, this\n    @right.on 'update', @update, this\n\n    @rect = svgUtil.buildSvgElement('rect', attrs)\n    parent.appendChild(@rect)\n    @update()\n\n  dispose: ->\n    {left, right, update, rect} = this\n    left.off 'update', update, this\n    right.off 'update', update, this\n\n    rect.parentNode.removeChild(rect)\n    @rect = null\n\n  update: (attrs) ->\n    x = Math.min(@left.x, @right.x)\n    width = Math.abs(@right.x - @left.x)\n\n    svgUtil.updateSvgElement @rect, $.extend({}, attrs, {x: x, width: width})\n    this\n\n\nclass Timeline extends pluginUtil.Base\n  constructor: (root, namespace, options={}) ->\n    super(root, namespace, options)\n\n    @_rows = []\n\n    @root.addClass('timeline')\n    @root.attr('tabindex', '1')\n    @root.append(@_buildDom())\n    @root.append(@_createDisplay())\n\n    @_data = {}\n\n    @animate = options.animate ? true\n\n    @_zoom = 4\n    @end = (options.end || new Date()) - 0\n    @start = @end - ZOOM_LEVELS[@_zoom]\n    @originPx = 0\n\n    @_loadedRange = []\n\n    @_updateTimeline()\n\n    @root\n      .on 'click.timeline', @scope('.date-label'), @_onLabelClick\n    @root.on 'mouseover.timeline', @scope('.date-label'), @_onLabelMouseover\n    @root.on 'mouseout.timeline', @scope('.date-label'), @_onLabelMouseout\n    @root.on 'mouseover.timeline', @scope('.data'), @_onDataMouseover\n    @root.on 'mouseout.timeline', @scope('.data'), @_onDataMouseout\n    @root.on 'keydown.timeline', @_onKeydown\n\n    @root.on 'focusout.timeline', (e) =>\n      @root.removeClass('hasfocus')\n      @_hasFocus = false\n      @_forceRedraw()\n    @root.on 'focusin.timeline', (e) =>\n      hovered = document.querySelector(\"#{@scope('.date-label')}:hover\")\n      @_onLabelClick(currentTarget: hovered) if hovered?\n      @root.addClass('hasfocus')\n      @_forceRedraw()\n      # We want click behavior when we have focus, but not when the focus came from the\n      # click's mousedown.  Ugh.\n      setTimeout((=> @_hasFocus = true), 500)\n\n  destroy: ->\n    @root.find('svg').remove()\n    @root.off('.timeline')\n    super()\n\n  range: ->\n    # Query and draw bounds that are 3x wider than needed, centered on the visible range.\n    # This prevents an in-progress drag from needing to redraw or re-query\n    {start, end} = this\n    span = end - start\n    [start - span, end + span, RESOLUTIONS[@_zoom - 2]]\n\n  startTime: ->\n    @start\n\n  endTime: ->\n    @end\n\n  show: ->\n    @root.show()\n    @_setHeight()\n    null\n\n  hide: ->\n    @root.hide()\n    @_setHeight()\n    @focus()\n    null\n\n  loadstart: (id, start, end, resolution) ->\n    match = @root[0].getElementsByClassName(id)\n    if match.length > 0\n      match[0].setAttribute('class', \"#{match[0].getAttribute('class')} #{@scope('loading')}\")\n      @_empty(match[0])\n\n  data: (id, data) =>\n    row = @_getRow(id)\n    @_loadedRange = [data.start, data.end, data.resolution]\n    @_data[id] = [data.start, data.end, data.resolution, data.intervals, row.color]\n    @_drawData(id)\n    @_drawIndicators(id)\n\n\n    @_drawData(id)\n    @_drawIndicators(id)\n\n  _drawIndicators: (id) ->\n    row = null\n    for row in @_rows\n      break if row.id == id\n    return unless row?\n\n    [_, _, _, intervals, color] = @_data[id]\n    color = color ? '#25c85b'\n\n    row_min = if row.min then new Date(row.min * 1000) else new Date(0)\n    row_max = if row.max then new Date(row.max * 1000) else new Date()\n\n    before_start =\n      row_max < @start ||\n        intervals.length > 0 && intervals[intervals.length - 1][1] * 1000 < @start\n\n    after_end =\n      row_min > @end ||\n        intervals.length > 0 && intervals[0][0] * 1000 > @end\n\n    before_color = if before_start then color else 'transparent'\n    after_color = if after_end then color else 'transparent'\n    document.getElementById(\"arrow-left-#{id}\").setAttribute('style', \"fill: #{before_color}\")\n    document.getElementById(\"arrow-right-#{id}\").setAttribute('style', \"fill: #{after_color}\")\n    null\n\n  _drawData: (id) ->\n    index = -1\n    for row, i in @_rows\n      if row.id == id\n        index = i\n        break\n    return if index == -1\n\n    zoom = @_zoom\n\n    [start, end, resolution, intervals, color] = @_data[id] ? [@start - 1 , @end + 1, RESOLUTIONS[zoom - 2], [], null]\n\n    match = @root[0].getElementsByClassName(id)\n    el = null\n    if match.length > 0\n      el = match[0]\n      @_empty(el)\n      el.parentNode.removeChild(el)\n    else\n      el = @_buildSvgElement('g')\n      @_translate(el, 0, ROW_HEIGHT * index) if index > 0\n\n    for [startTime, endTime, _] in intervals\n      startPos = @timeToPosition(startTime * 1000)\n      endPos = @timeToPosition(endTime * 1000)\n      attrs =\n        x: startPos\n        y: 5\n        width: endPos - startPos\n        height: ROW_HEIGHT - 7\n        rx: 10\n        ry: 10\n      attrs['class'] = @scope('imprecise') if resolution != RESOLUTIONS[zoom - 2]\n      rect = @_buildSvgElement 'rect', attrs\n      rect.setAttribute('style', \"fill: #{color}\") if color?\n      el.appendChild(rect)\n\n    # Remove 'timeline-loading' class\n    el.setAttribute('class', \"#{id} #{@scope('data')}\")\n\n    @tlRows.appendChild(el)\n\n    @_drawIndicators(id)\n\n    null\n\n  _onDataMouseover: (e) =>\n    tooltip = $('.timeline-tooltip')\n    data = e.target\n\n    id = data.parentNode.className.baseVal.split(' ')[0]\n    resolution = @_data[id][2]\n    intervals = @_data[id][3]\n    nodes = $(e.currentTarget.childNodes)\n    interval = intervals[nodes.index(data)]\n    start = interval[0] * 1000\n    stop = interval[1] * 1000\n    tooltip.find('.inner').text(\"#{@_dateWithResolution(start, resolution)} to #{@_dateWithResolution(stop, resolution)}\")\n\n    matrix = data.getScreenCTM()\n    leftEdge = matrix.e + data.x.baseVal.value\n    rightEdge = leftEdge + data.width.baseVal.value\n    leftEdge = 0 if leftEdge < 0\n    rightEdge = window.innerWidth if rightEdge > window.innerWidth\n    tooltip.css(\"left\", ((leftEdge + rightEdge)/2 - tooltip.width()/2) + \"px\")\n    dataTop = matrix.f\n    timelineTop = $('.timeline').offset().top\n    tooltip.css(\"top\", (dataTop - timelineTop  - 33) + \"px\")\n\n    tooltip.show()\n\n  _onDataMouseout: (e) =>\n    $('.timeline-tooltip').hide()\n\n  _dateWithResolution: (date, resolution) ->\n    str = dateUtil.dateToHumanUTC(date).split(' ')\n    # str is ['03', 'Aug', '1987', '00:00', 'GMT']\n    index = RESOLUTIONS.indexOf(resolution)\n    if index > 1\n      str[3] = ''\n      str[4] = ''\n    if index > 2\n      str[0] = ''\n    if index > 3\n      str[1] = ''\n\n    str.join(' ')\n\n  _forceRedraw: ->\n    rect = @_buildRect(stroke: 'none', fill: 'none')\n    svg = @svg\n    svg.appendChild(rect)\n    callback =  -> svg.removeChild(rect)\n    if window.requestAnimationFrame\n      window.requestAnimationFrame(callback)\n    else\n      setTimeout(callback)\n\n  refresh: ->\n    @rows(@_rows)\n\n  rows: (rows) ->\n    if rows?.length > 0\n      @_rows = ($.extend({}, row) for row in rows)\n      @_updateRowNames()\n      @_drawTemporalBounds()\n      @_empty(@tlRows)\n      @_data = {}\n      @show()\n    else\n      @hide()\n    @_rows\n\n  timeSpanToPx: (t) ->\n    t / @scale\n\n  pxToTimeSpan: (p) ->\n    @scale / p\n\n  timeToPosition: (t) ->\n    {originPx, start, scale} = this\n    originPx + (t - start) / scale\n\n  positionToTime: (p) ->\n    {originPx, start, scale} = this\n    Math.floor((p - originPx) * scale + start)\n\n  zoomIn: ->\n    @root.trigger('buttonzoom')\n    @_deltaZoom(-1)\n\n  zoomOut: ->\n    @root.trigger('buttonzoom')\n    @_deltaZoom(1)\n\n  zoom: (arg) ->\n    if arg?\n      @_deltaZoom(arg - @_zoom)\n      null\n    else\n      @_zoom\n\n  center: (arg) ->\n    if arg?\n      @panToTime(arg + (@end - @start) / 2)\n      null\n    else\n      Math.round((@end + @start) / 2)\n\n  _deltaZoom: (levels, center_t=@center()) ->\n    @_zoom = Math.min(Math.max(@_zoom + levels, 2), ZOOM_LEVELS.length - 1)\n\n    @root.toggleClass(@scope('max-zoom'), @_zoom == ZOOM_LEVELS.length - 1)\n    @root.toggleClass(@scope('min-zoom'), @_zoom == 2)\n\n    # We want to zoom in a way that keeps the center_t at the same pixel so you\n    # can double-click or scoll-wheel to zoom and your mouse stays over the same time\n\n    x = @timeToPosition(center_t)\n\n    timeSpan = ZOOM_LEVELS[@_zoom]\n\n    scale = timeSpan / @width\n\n    @start = center_t - (scale * (x - @originPx))\n    @end = @start + timeSpan\n\n    @scale = scale\n\n    @focus()\n    @_updateTimeline()\n    @_drawTemporalBounds()\n\n  focus: (t0, t1) ->\n    if  Math.abs(t0 - @_focus) < 1000\n      return unless @_hasFocus # Regaining input focus, don't do anything (EDSC-323)\n      t0 = null\n    @_focus = t0\n\n    root = @root\n    overlay = @focusOverlay\n    @_empty(overlay)\n\n    if t0?\n      root.trigger(@scopedEventName('focusset'), [t0, t1, RESOLUTIONS[@_zoom - 1]])\n      startPt = @timeToPosition(t0)\n      stopPt = @timeToPosition(t1)\n\n      left = @_buildRect(class: @scope('unfocused'), x1: startPt)\n      overlay.appendChild(left)\n\n      right = @_buildRect(class: @scope('unfocused'), x: stopPt)\n      overlay.appendChild(right)\n    else\n      root.trigger(@scopedEventName('focusremove'))\n    @_forceRedraw()\n    null\n\n  panToTime: (time) ->\n    @_pan(@timeSpanToPx(@end - time))\n\n  _getTransformX: svgUtil.getTransformX\n\n  _onKeydown: (e) =>\n    focus = @_focus\n    key = e.keyCode\n    left = 37\n    up = 38\n    right = 39\n    down = 40\n    if focus && (key == left || key == right)\n      @root.trigger('arrowpan')\n      zoom = @_zoom - 1\n\n      focusEnd = @_roundTime(focus, zoom, 1)\n\n      if key == left\n        t0 = @_roundTime(focus, zoom, -1)\n        t1 = focus - 1\n        dx = @timeSpanToPx(focusEnd - focus)\n      else\n        t0 = focusEnd\n        t1 = @_roundTime(focus, zoom, 2) - 1\n        dx = -@timeSpanToPx(t1 - t0)\n\n      if @_canFocusTimespan(t0, t1)\n        @_pan(dx)\n        @focus(t0, t1)\n\n  _canFocusTimespan: (start, stop) ->\n    for row in @_rows\n      return true if !row.canFocusTimespan || row.canFocusTimespan(start, stop)\n    false\n\n  _timespanForLabel: (group) ->\n    next = group.previousSibling\n\n    x0 = @_getTransformX(group)\n    x1 = @_getTransformX(next, x0)\n\n    [@positionToTime(x0), @positionToTime(x1) - 1]\n\n  _onLabelClick: (e) =>\n    return if @_dragging\n    @root.trigger('clicklabel')\n    label = e.currentTarget\n    [start, stop] = @_timespanForLabel(label)\n    if @_canFocusTimespan(start, stop)\n      @focus(start, stop)\n\n  _onLabelMouseover: (e) =>\n    label = e.currentTarget\n    [start, stop] = @_timespanForLabel(label)\n    unless @_canFocusTimespan(start, stop)\n      label.setAttribute('class', \"#{@scope('date-label')} #{@scope('nofocus')}\")\n\n  _onLabelMouseout: (e) =>\n    label = e.currentTarget\n    label.setAttribute('class', @scope('date-label'))\n\n  _contains: (start0, end0, start1, end1) ->\n    start0 < start1 < end0 && start0 < end1 < end0\n\n  _empty: (node) ->\n    $(node).empty()\n  # node.innerHTML = '' # Works for browsers but not capybara-webkit\n\n  _buildSvgElement: svgUtil.buildSvgElement\n\n  _translate: (el, x, y) ->\n    el.setAttribute('transform', \"translate(#{x}, #{y})\")\n    el\n\n  _buildDom: ->\n    $('<div class=\"timeline-tools\">\n        <h1></h1>\n        <div class=\"timeline-tools-zoom\">\n          <a class=\"timeline-zoom-in\" href=\"#\">+</a>\n          <a class=\"timeline-zoom-out\" href=\"#\">&#8722;</a>\n        </div>\n      </div>\n\n      <div class=\"timeline-tooltip top\">\n        <div class=\"tooltip-arrow\"></div>\n        <div class=\"inner\"></div>\n      </div>')\n\n  _createDisplay: ->\n    @svg = svg = @_buildSvgElement('svg', class: @scope('display'))\n\n    offset = @root.find(@scope('.tools')).width()\n\n    selection = @_createSelectionOverlay(svg)\n    @_translate(selection, offset, 0)\n\n    top = @_buildRect(class: @scope('display-top'), y: 0, y1: TOP_HEIGHT)\n    @_setupTemporalSelection(top)\n    @_translate(top, offset, 0)\n\n    focus = @_createFocusOverlay(svg)\n    @_translate(focus, offset, 0)\n\n    overlay = @_createFixedOverlay(svg)\n    @_translate(overlay, offset, 0)\n\n    timeline = @_createTimeline(svg)\n    @_translate(timeline, offset, 0)\n\n    svg.appendChild(timeline)\n    svg.appendChild(top)\n    svg.appendChild(overlay)\n    svg.appendChild(selection)\n    svg.appendChild(focus)\n\n    @_setupDragBehavior(svg)\n    @_setupScrollBehavior(svg)\n\n    svg\n\n  _setupTemporalSelection: (el) ->\n    self = this\n    root = @root\n\n    $(el).on 'click', =>\n      root.trigger(@scopedEventName('temporalchange'), [])\n\n    draggable = new Draggable(el, @animate)\n\n    left = null\n    right = null\n\n    draggable.on 'dragstart', ({cursor}) =>\n      overlay = @selectionOverlay\n      @_empty(overlay)\n      [left, right] = @_createSelectionRegion(overlay, cursor.x, cursor.x, [0...@_rows.length])\n\n    draggable.on 'dragmove', (e) -> right._onUpdate(e)\n    draggable.on 'dragend', (e) ->\n      root.trigger('createdtemporal')\n      right._onEnd(e)\n\n  _setupScrollBehavior: (svg) ->\n    allowWheel = true\n\n    rateLimit = ->\n      allowWheel = false\n      setTimeout((-> allowWheel = true), 300)\n\n    getTime = (e) =>\n      draggable = @root.find(@scope('.draggable'))[0]\n      origin = @_getTransformX(draggable)\n\n      x = e.clientX - svg.clientLeft - origin\n      time = @positionToTime(x)\n\n    doScroll = (deltaX, deltaY, time) =>\n      return unless allowWheel\n      if Math.abs(deltaY) > Math.abs(deltaX)\n        levels = if deltaY > 0 then -1 else 1\n        @root.trigger('scrollzoom')\n        @_deltaZoom(levels, time)\n        rateLimit()\n      else if deltaX != 0\n        @root.trigger('scrollpan')\n        @_pan(deltaX)\n\n    # Safari\n    onWheel = (e) ->\n      deltaX = e.wheelDeltaX\n      deltaY = e.wheelDeltaY\n      doScroll(deltaX, deltaY, getTime(e))\n      e.preventDefault()\n\n    svg.addEventListener('mousewheel', onWheel)\n    svg.addEventListener('DOMMouseScroll', onWheel)\n\n    # Chrome/Firefox\n    svg.addEventListener 'wheel', (e) ->\n      return if e.type == \"mousewheel\"\n\n      # 'wheel' deltas are opposite from 'mousewheel'\n      deltaX = -e.deltaX\n      deltaY = -e.deltaY\n      doScroll(deltaX, deltaY, getTime(e))\n\n      e.preventDefault()\n\n    touchSeparation = 0\n    touchCenter = 0\n    svg.addEventListener 'touchstart', (e) ->\n      return unless e.touches && e.touches.length == 2\n      center = (e.touches[0].clientX + e.touches[1].clientX) / 2\n      time = getTime(clientX: center)\n      touchSeparation = Math.abs(e.touches[0].clientX - e.touches[1].clientX)\n      e.preventDefault()\n\n    svg.addEventListener 'touchmove', (e) ->\n      return unless e.touches && e.touches.length == 2\n      deltaY = Math.abs(e.touches[0].clientX - e.touches[1].clientX) - touchSeparation\n      doScroll(0, -deltaY, touchCenter)\n\n  _setupDragBehavior: (svg) ->\n    #draggable = new TimelineDraggable(svg, @animate)\n    el = svg.querySelector(@scope('.draggable'));\n    #draggable = new Draggabilly(el, axis: 'x')\n    draggable = new Draggable(el, @animate)\n\n    dx = 0\n    draggable.on 'dragmove', (e) =>\n      dx = e.offset.x\n      @_dragging = true if Math.abs(dx) > 5\n      @_pan(dx, false)\n    draggable.on 'dragend', (e) =>\n      dx = e.offset.x\n      @_dragging = false\n      @_pan(dx)\n\n  _pan: (dx, commit=true) ->\n    @_startPan() unless @_panStart?\n\n    start = @_panStart\n    end = @_panEnd\n\n    span = end - start\n    @start = start - dx * @scale\n    @end = @start + span\n\n    @originPx = -(@_panStartX + dx) # x offset from its original position\n\n    draggables = @root.find([@scope('.draggable'), @scope('.selection'), @scope('.display-top'), @scope('.focus')].join(', '))\n    draggables.attr('transform', \"translate(#{-@originPx + OFFSET_X},0)\")\n    @_forceRedraw()\n\n    @_finishPan() if commit\n\n  _startPan: ->\n    draggable = @root.find(@scope('.draggable'))[0]\n    @_panStartX = @_getTransformX(draggable, OFFSET_X) - OFFSET_X\n    @_panStart = @start\n    @_panEnd = @end\n\n  _finishPan: =>\n    @_updateTimeline()\n    @_panStartX = @_panStart = @_panEnd = null\n\n  _createSelectionOverlay: (svg) ->\n    @selectionOverlay = @_buildSvgElement('g', class: @scope('selection'))\n\n  _createFocusOverlay: (svg) ->\n    @focusOverlay = @_buildSvgElement('g', class: @scope('focus'))\n\n  _createFixedOverlay: (svg) ->\n    @overlay = overlay = @_buildSvgElement('g', class: @scope('overlay'))\n\n    @olRows = rows = @_buildSvgElement('g', class: @scope('row'))\n    @_translate(rows, 5, ROW_TEXT_OFFSET)\n\n    overlay.appendChild(rows)\n\n    overlay\n\n  _createTimeline: (svg) ->\n    @timeline = timeline = @_buildSvgElement('g', class: @scope('draggable'))\n\n    background = @_buildSvgElement 'rect',\n      class: @scope('background')\n      x: MIN_X\n      y: MIN_Y\n      width: MAX_X - MIN_X\n      height: MAX_Y - MIN_Y\n\n    @tlRows = rows = @_buildSvgElement('g')\n    @_translate(rows, 0, TOP_HEIGHT)\n\n    @axis = axis = @_buildSvgElement('g')\n    @_translate(axis, 0, TOP_HEIGHT)\n\n    timeline.appendChild(background)\n    timeline.appendChild(axis)\n    timeline.appendChild(rows)\n\n    timeline\n\n  _buildIndicatorArrow: (id, transform) ->\n    g = @_buildSvgElement('g',\n      class: @scope('indicator'),\n      id: id,\n      transform: transform)\n    g.appendChild(@_buildSvgElement('path', d: 'M 0 -5 L 6 1 L 8 -1 L 4 -5 L 8 -9 L 6 -11 z'))\n    g.appendChild(@_buildSvgElement('path', d: 'M 5 -5 L 11 1 L 13 -1 L 9 -5 L 13 -9 L 11 -11 z'))\n    g\n\n  _updateRowNames: ->\n    rows = @_rows\n    overlay = @olRows\n    @_empty(overlay)\n    y = 0\n\n    textGroup = @_buildSvgElement('g')\n\n    for row in rows\n      overlay.appendChild(@_buildIndicatorArrow(\"arrow-left-#{row.id}\", \"translate(0, #{y})\"))\n      overlay.appendChild(@_buildIndicatorArrow(\"arrow-right-#{row.id}\", \"translate(#{@width - 20}, #{y - 10}) rotate(180)\"))\n\n      txt = @_buildSvgElement('text', x: 15, y: y)\n      txt.textContent = row.title\n      textGroup.appendChild(txt)\n      y += ROW_HEIGHT\n\n    overlay.appendChild(textGroup)\n\n    fn = =>\n      bbox = textGroup.getBBox()\n      rect = @_buildSvgElement('rect', x: bbox.x, y: -ROW_FONT_HEIGHT - ROW_PADDING, width: bbox.width, height: y, class: @scope('shadow'))\n      overlay.insertBefore(rect, overlay.firstChild) if overlay.firstChild\n    setTimeout(fn, 0)\n\n    null\n\n  _updateTimeline: ->\n    {axis, timeline, start, end, root} = this\n    zoom = @_zoom\n\n    @_empty(axis)\n\n    root.find('h1').text(RESOLUTIONS[zoom - 1])\n\n    line = @_buildSvgElement('line', class: @scope('timeline'), x1: MIN_X, y1: 0, x2: MAX_X, y2: 0)\n    axis.appendChild(line)\n\n    elWidth = root.width()\n    elWidth = $(window).width() if elWidth == 0\n\n    @width = width = elWidth - root.find(@scope('.tools')).width()\n    @scale = (end - start) / width # ms per pixel\n\n    range = @range()\n\n    @_drawIntervals(range[0], range[1], zoom - 1)\n\n    for own k, _ of @_data\n      @_drawData(k)\n\n    resolution = range[2]\n    [loadedStart, loadedEnd, loadedResolution] = @_loadedRange\n    unless loadedResolution == resolution && @_contains(loadedStart, loadedEnd, start, end)\n      for node in @tlRows.childNodes\n        node.setAttribute('class', \"#{node.getAttribute('class')} #{@scope('loading')}\")\n\n    root.trigger(@scopedEventName('rangechange'), range)\n\n  setTemporal: (ranges) ->\n    @_globalTemporal = ranges\n\n  setRowTemporal: (id, ranges) ->\n    row = @_getRow(id)\n    if row\n      row.temporal = ranges\n\n  _getRow: (id) ->\n    for row in @_rows\n      return row if row.id == id\n    null\n\n  _drawTemporalBounds: ->\n    overlay = @selectionOverlay\n    rows = @_rows\n    @_empty(overlay)\n\n    return unless rows.length > 0\n\n    globalIndexes = []\n    for row, index in rows\n      if row.temporal\n        @_createTemporalRegion(overlay, row.temporal, [index])\n      else\n        globalIndexes.push(index)\n\n    if @_globalTemporal\n      @_createTemporalRegion(overlay, @_globalTemporal, globalIndexes)\n\n  _createSelectionRegion: (overlay, x0, x1, indexes) ->\n    left = new TemporalFencepost(overlay, x0, MAX_Y)\n    right = new TemporalFencepost(overlay, x1, MAX_Y)\n\n    update = ->\n      leftX = Math.min(left.x, right.x)\n      rightX = Math.max(left.x, right.x)\n      start = new Date(@positionToTime(leftX))\n      stop = new Date(@positionToTime(rightX))\n      @root.trigger(@scopedEventName('temporalchange'), start, stop)\n      null\n\n    left.on 'commit', update, this\n    right.on 'commit', update, this\n    left.on 'update', @_forceRedraw, this\n    right.on 'update', @_forceRedraw, this\n\n    for index in indexes\n      new TemporalSelection overlay, left, right,\n        class: @scope('selection-region')\n        y: TOP_HEIGHT + ROW_HEIGHT * index\n        height: ROW_HEIGHT\n    [left, right]\n\n  _createTemporalRegion: (overlay, temporal, indexes) ->\n    for [start, stop] in temporal\n      @_createSelectionRegion(overlay, @timeToPosition(start), @timeToPosition(stop), indexes)\n\n  _buildRect: (attrs) ->\n    attrs = $.extend({x: MIN_X, x1: MAX_X, y: MIN_Y, y1: MAX_Y}, attrs)\n    attrs['width'] ?= (attrs.x1 - attrs.x) | 0\n    attrs['height'] ?= (attrs.y1 - attrs.y) | 0\n    delete attrs.x1\n    delete attrs.y1\n    @_buildSvgElement 'rect', attrs\n\n  _roundTime: (time, zoom, increment=0) ->\n    time = Math.round(time / 1000) * 1000\n    date = new Date(time)\n    components = (date[\"getUTC#{c}\"]() for c in ['FullYear', 'Month', 'Date', 'Hours', 'Minutes'])\n    components = components.slice(0, Math.max(components.length - zoom, 1))\n    # Zoom to decade\n    if zoom == ZOOM_LEVELS.length - 2\n      components[0] = Math.floor(components[0] / 10) * 10\n      increment *= 10\n\n    components[components.length - 1] += increment\n    components.push(0) if components.length == 1\n    Date.UTC(components...)\n\n  _drawIntervals: (start, end, zoom) ->\n    axis = @axis\n\n    start = @_roundTime(start, zoom)\n    end = @_roundTime(end, zoom)\n\n    time = end\n\n    while time >= start\n      date = new Date(time)\n      prev = @_roundTime(time, zoom, -1)\n      next = @_roundTime(time, zoom, 1)\n      interval = @_buildIntervalDisplay(@timeToPosition(time), @timeToPosition(next), LABELS[zoom](date)...)\n      axis.appendChild(interval)\n      time = prev\n\n  _buildIntervalDisplay: (x0, x1, text, subText) ->\n    g = @_buildSvgElement('g', class: @scope('date-label'))\n    @_translate(g, x0, 0)\n    width = x1 - x0\n\n    if x1?\n      # Something to click on\n      bg = @_buildSvgElement 'rect',\n        x: 0\n        y: 0\n        width: width\n        height: MAX_Y - MIN_Y\n      g.appendChild(bg)\n\n    label = @_buildSvgElement('text', x: 5, y: 20, class: \"#{@scope('axis-label')} #{@scope('axis-super-label')}\")\n    label.textContent = text\n\n    lineClass = @scope('tick')\n    lineClass += ' ' + @scope('interval-start') if subText\n    line = @_buildSvgElement('line', class: lineClass, x1: 0, y1: MIN_Y, x2: 0, y2: MAX_Y)\n\n    circle = @_buildSvgElement('circle', class: @scope('tick-crossing'), r: 6, cx: width)\n\n    g.appendChild(line)\n    g.appendChild(circle)\n    g.appendChild(label)\n\n    if subText\n      subLabel = @_buildSvgElement('text', x: 5, y: 34, class: \"#{@scope('axis-label')} #{@scope('axis-sub-label')}\")\n      subLabel.textContent = subText\n      g.appendChild(subLabel)\n\n    g\n\n  _setHeight: ->\n    if @_rows?.length > 0\n      rowsHeight = @_rows.length * ROW_HEIGHT + 2 * ROW_PADDING\n      @_translate(@axis, 0, TOP_HEIGHT + rowsHeight)\n      totalHeight = Math.max(TOP_HEIGHT + rowsHeight + AXIS_HEIGHT, 100)\n      @root.height(totalHeight)\n      $(@svg).height(totalHeight)\n\npluginUtil.create('timeline', Timeline)\n\n# Integration FIXME:\n#\n# _setHeight: ->\n#    $('.master-overlay').masterOverlay().masterOverlay('contentHeightChanged')\n#\n# Implement canFocusTimespan\n# Respond to temporal selection / clear events\n# Set temporal when it changes\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/edsc-timeline.coffee\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./edsc-timeline.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./edsc-timeline.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js!./edsc-timeline.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/css/edsc-timeline.less\n ** module id = 2\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".timeline * {\\n  box-sizing: border-box;\\n}\\n.timeline {\\n  height: 100px;\\n  min-height: 100px;\\n  position: relative;\\n  border-top: 1px solid #727272;\\n  box-shadow: 0 -10px 15px 0 rgba(0, 0, 0, 0.3);\\n  display: none;\\n}\\n.timeline .busy {\\n  background-position: 0 bottom;\\n  padding: 0;\\n}\\n.timeline.hasfocus {\\n  outline: none;\\n}\\n.timeline-tools {\\n  position: absolute;\\n  z-index: 20;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  width: 3em;\\n  background-color: #2a2a2a;\\n  text-align: center;\\n  height: 100%;\\n  box-shadow: 5px 0 5px 0 rgba(0, 0, 0, 0.7);\\n  border-top: 1px solid #000;\\n}\\n.timeline-tools h1 {\\n  font-size: .7em;\\n  padding: .2em 0;\\n  margin: 0;\\n  text-transform: uppercase;\\n  color: #ffffff;\\n}\\n.timeline-tools a {\\n  display: block;\\n  font-size: 1.6em;\\n  background: #7a7a7a;\\n  color: #000;\\n  margin: .3em auto;\\n  width: 1em;\\n  height: 1em;\\n  line-height: .9em;\\n  text-decoration: none;\\n  font-weight: bold;\\n  border-radius: 1em;\\n}\\n.timeline-tools a:hover {\\n  background: #aaa;\\n}\\n.timeline-min-zoom a.timeline-zoom-in,\\n.timeline-max-zoom a.timeline-zoom-out {\\n  color: #555;\\n  cursor: default;\\n}\\n.timeline-display {\\n  background-color: #1a1a1a;\\n  display: block;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 100%;\\n  cursor: move;\\n  border-bottom: 1px solid #727272;\\n}\\n.timeline-display text {\\n  fill: #fff;\\n}\\n.timeline-shadow {\\n  fill: #222;\\n  fill-opacity: .5;\\n}\\n.timeline-timeline {\\n  stroke: #a5a5a5;\\n  stroke-width: 2;\\n}\\n.timeline-tick {\\n  stroke: #3d3d3d;\\n}\\n.timeline-interval-start {\\n  stroke: #a5a5a5;\\n}\\n.timeline-data rect {\\n  fill: #25c85b;\\n}\\n.timeline-data rect.timeline-imprecise {\\n  fill-opacity: .5;\\n}\\n.timeline-tick-crossing {\\n  stroke: #1a1a1a;\\n  fill: #fff;\\n  stroke-width: 2;\\n}\\n.timeline-dataset {\\n  font-size: 14px;\\n  font-weight: bold;\\n}\\n.timeline-display-top {\\n  fill: #2a2a2a;\\n  cursor: pointer;\\n}\\n.timeline-axis-label {\\n  font-size: 12px;\\n}\\n.timeline-axis-super-label {\\n  font-weight: bold;\\n}\\n.timeline-axis-sub-label {\\n  font-weight: bold;\\n}\\n.timeline-selection {\\n  fill: #c74105;\\n  stroke: #c74105;\\n}\\n.timeline-selection path {\\n  cursor: move;\\n  cursor: -webkit-grab;\\n  cursor: -moz-grab;\\n}\\n.timeline-selection-region {\\n  fill-opacity: .5;\\n  stroke-width: 0;\\n}\\n.timeline-date-label:not(.timeline-nofocus) {\\n  cursor: pointer;\\n}\\n.timeline-date-label:not(.timeline-nofocus):hover rect {\\n  fill: #2a2a2a;\\n}\\n.timeline-date-label:not(.timeline-nofocus):hover text {\\n  fill: #3498db;\\n}\\n.timeline-nofocus {\\n  cursor: not-allowed;\\n}\\n.timeline-unfocused {\\n  pointer-events: none;\\n  fill: #000;\\n  fill-opacity: .5;\\n  stroke: #708c9f;\\n}\\n.timeline.hasfocus .timeline-unfocused {\\n  stroke: #3498db;\\n}\\n.timeline-indicator {\\n  fill: transparent;\\n}\\n.timeline-tooltip {\\n  position: absolute;\\n  padding: 5px 0;\\n  font-size: 12px;\\n  z-index: 20;\\n  display: none;\\n}\\n.timeline-tooltip .inner {\\n  background: #315880;\\n  border-radius: 4px;\\n  padding: 3px 8px;\\n  white-space: nowrap;\\n}\\n.timeline-tooltip.top {\\n  margin-top: 3px;\\n  padding: 5px 0;\\n}\\n.timeline-tooltip.top .tooltip-arrow {\\n  bottom: 0;\\n  left: 50%;\\n  margin-left: -5px;\\n  border-width: 5px 5px 0;\\n  border-top-color: #315880;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./src/css/edsc-timeline.less\n ** module id = 3\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 4\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0;\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction createStyleElement() {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tvar head = getHeadElement();\r\n\tstyleElement.type = \"text/css\";\r\n\thead.appendChild(styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement() {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tvar head = getHeadElement();\r\n\tlinkElement.rel = \"stylesheet\";\r\n\thead.appendChild(linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement());\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement();\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement();\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 5\n ** module chunks = 0\n **/","// Pad the given str (string) by prepending the given padChar (string) until it\n// is at least len (int) characters long\nexports.padLeft = function(str, padChar, len) {\n  str = \"\" + str;\n  padChar = \"\" + padChar;\n  while (str.length < len) {\n    str = padChar + str;\n  }\n  return str;\n};\n\n// Convert the string to one which uses dashes instead of spaces and underscores\n// and has dashes between CapWords.\nexports.dasherize = function(str) {\n  return str\n    .replace(/[_\\s]+/g, '-')    // Replace runs of spaces and underscores with dashes\n    .replace(/([A-Z])/g, '-$1') // Insert dashes before capital letters\n    .replace(/-+/g, '-')        // Replace runs of dashes with single dashes\n    .replace(/\\A-/g, '')        // Get rid of leading dashes\n    .replace(/-\\Z/g, '')        // Get rid of trailing dashes\n    .toLowerCase();             // Lowercase\n};\n\n// Capitalize the first letter of the string\nexports.capitalize = function(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/util/string.js\n ** module id = 6\n ** module chunks = 0\n **/","stringUtil = require('./string')\n\nclickHandler = (pluginName, method, rootSelector, dataArg) ->\n  (e) ->\n    $this = $(this)\n    if $this.is('a') || $(e.target).closest('a').length == 0\n      $root = $this.closest(rootSelector)\n      if $root.length == 0\n        href = $this.attr('href')\n        $root = $(href) if href? && href.length > 1\n\n      $root[pluginName](method, $this.attr(dataArg))\n    false\n\n# Sets up onclick handlers\nsetupClickHandlers = (pluginName, Class) ->\n  specialMethods = ['constructor', 'destroy']\n  $document = $(document)\n  prefix = stringUtil.dasherize(pluginName)\n  rootSelector = \".#{prefix}\"\n\n  for own method, fn of Class.prototype\n    unless method in specialMethods || method.indexOf('_') == 0\n      classname = \"#{prefix}-#{stringUtil.dasherize(method)}\"\n\n      selector = \".#{classname}\"\n      handler = clickHandler(pluginName, method, rootSelector, \"data-#{classname}\")\n      $document.on 'click', selector, handler\n\ncreate = (pluginName, Class) ->\n  setupClickHandlers(pluginName, Class) unless Class.noClickHandlers\n\n  $.fn[pluginName] = (args...) ->\n    if args.length > 0 && typeof args[0] == 'string'\n      # Method call\n      [method, args...] = args\n      result = for el in this\n        instance = $.data(el, pluginName)\n\n        if !instance\n          console.warn \"#{pluginName} not found on element\"\n          el\n\n        else if /^debug_/.test(method)\n          # Calling $el.<pluginName>('debug_attrname') returns the attribute named attrname for\n          # debugging purposes\n          [x, attr...] = method.split('_')\n          instance[attr.join('_')]\n\n        else if method == 'destroy'\n          # Special case when calling the 'destroy' method, we also need to remove its data\n          $.removeData(el, pluginName)\n          instance.destroy() if typeof instance?.destroy == 'function'\n\n        else if !/^_/.test(method) && typeof instance?[method] == 'function'\n          # Calling $el.<pluginName>(method, args...) calls the given method passing the given args\n          instance[method](args...)\n        else\n          console.error \"Could not call #{method} on #{pluginName} instance:\", el\n          null\n      result[0]\n    else if args.length < 2\n      @each ->\n        # Constructor call\n        options = args[0]\n        # Prevent multiple instantiations\n        unless $.data(this, pluginName)?\n          obj = new Class($(this), pluginName, options)\n          $.data(this, pluginName, obj)\n    else\n      console.error \"Bad arguments to #{pluginName}:\", args\n      this\n\nclass Base\n  constructor: (@root, @namespace, @_options) ->\n    @cssScope = stringUtil.dasherize(@namespace)\n\n  destroy: ->\n\n  scope: (name, options={}) ->\n    prefixes = ['.', 'is-']\n\n    before = \"\"\n    for prefix in prefixes when name.indexOf(prefix) == 0\n      before += prefix\n      name = name.substring(prefix.length)\n\n    \"#{before}#{@cssScope}-#{name}\"\n\n  scopedEventName: (name) ->\n    \"#{name}.#{@namespace}\"\n\nexports.create = create\nexports.Base = Base\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/util/plugin.coffee\n **/","exports.dateToHumanUTC = function(date) {\n  var result, dateTime, tz, utcStr;\n  if (date !== null && typeof(date) !== 'undefined') {\n    utcStr = new Date(date).toUTCString();\n    tz = utcStr.substring(utcStr.length-3);\n\n    dateTime = utcStr\n      .replace(/^\\S+\\s/, '')   // Remove leading word (day of week)\n      .replace(/:[^:]*$/, ''); // Remove everything after the minutes\n    // Tack on the time zone code\n    result = dateTime + ' ' + tz;\n    }\n  else {\n    result = 'Unknown';\n  }\n  return result;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/util/date.js\n ** module id = 8\n ** module chunks = 0\n **/","var getTransformAttr = function(el) {\n  return el.getAttribute('transform')\n    || el.parentNode.getAttribute('transform')\n    || '';\n};\n\nvar getLeftAttr = function(el) {\n  return el.getAttribute('left')\n    || el.parentNode.getAttribute('left')\n    || '';\n};\n\nvar updateSvgElement = function(el, attrs) {\n  var attr;\n  if (attrs != null) {\n    for (attr in attrs) {\n      if (attrs.hasOwnProperty(attr) && attrs[attr] != null) {\n        el.setAttribute(attr, attrs[attr]);\n      }\n    }\n  }\n  return el;\n};\n\nexports.updateSvgElement = updateSvgElement;\n\nexports.buildSvgElement = function(name, attrs) {\n  var el = document.createElementNS('http://www.w3.org/2000/svg', name);\n  return updateSvgElement(el, attrs);\n};\n\nexports.getTransformX = function(el, defaultValue) {\n  var re, match, result, left;\n  result = defaultValue || 0;\n  if (el) {\n    match = /^[^\\d\\-]*(-?[\\d\\.]+)/.exec(getTransformAttr(el));\n    if (match && match[1]) {\n      result = parseFloat(match[1]);\n    }\n  }\n  return result;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/util/svg.js\n ** module id = 9\n ** module chunks = 0\n **/","svgUtil = require('../util/svg')\n\nbrowserPrefix = (name) ->\n  window['webkit' + name] || window['moz' + name] || window['ms' + name]\n\nrequestAnimFrame = (window.requestAnimationFrame ||\n                    browserPrefix('RequestAnimationFrame') ||\n                   (fn) -> window.setTimeout(fn))\ncancelAnimFrame = (window.cancelAnimationFrame ||\n                   browserPrefix('CancelAnimationFrame') ||\n                   browserPrefix('CancelRequestAnimationFrame') ||\n                  (id) -> window.clearTimeout(id))\n\ngetOffset = (e) ->\n  el = e.target\n  x = y = 0\n\n  while el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)\n    x += el.offsetLeft - el.scrollLeft\n    y += el.offsetTop - el.scrollTop\n    el = el.offsetParent;\n\n  x = e.clientX - x\n  y = e.clientY - y\n\n  {x: x, y: y}\n\nmodule.exports = class Draggable\n  constructor: (element, @animate=true) ->\n    @_dragging = false\n    @_element = element\n    @enable()\n\n  dispose: ->\n    @disable()\n\n  enable: ->\n    el = @_element\n    el.addEventListener(\"mousedown\", @_mousedown)\n    el.addEventListener(\"touchstart\", @_mousedown)\n\n  disable: ->\n    el = @_element\n    el.removeEventListener(\"mousedown\", @_mousedown)\n    el.removeEventListener(\"touchstart\", @_mousedown)\n\n  on: (events, fn, context) ->\n    @_listeners ?= {}\n    context ?= this\n    for event in events.split(' ')\n      @_listeners[event] ?= []\n      @_listeners[event].push([fn, context])\n    this\n\n  off: (events, fn, context) ->\n    @_listeners ?= {}\n    for event in events.split(' ')\n      listeners = @_listeners[event]\n      if listeners?\n        i = 0\n        while i < listeners.length\n          if listeners[i][0] == fn && listeners[i][1] == context\n            listeners.splice(i, 1)\n          else\n            i++\n        if listeners.length == 0\n          delete @_listeners[event]\n    this\n\n  fire: (event, data) ->\n    console.log event, JSON.stringify(data)\n    listeners = @_listeners?[event]\n    return this unless listeners?\n\n    e = $.extend({}, data ? {}, type: event, target: this)\n    fn.call(context, e) for [fn, context] in listeners\n    this\n\n  _mousedown: (e) =>\n    return if e.shiftKey || (e.which != 1 && e.button != 1 && !e.touches)\n    e.stopPropagation()\n    return if @_dragging\n\n    e = e.touches?[0] || e\n    @_preStartCursor = getOffset(e)\n\n    document.addEventListener(\"mousemove\", @_mousemove)\n    document.addEventListener(\"touchmove\", @_mousemove)\n    document.addEventListener(\"mouseup\", @_mouseup)\n    document.addEventListener(\"touchend\", @_mouseup)\n\n  _mousemove: (e) =>\n    return if e.touches?.length > 1\n\n    e = e.touches?[0] || e\n    cursor = getOffset(e)\n    offset = {x: cursor.x - @_preStartCursor.x, y: cursor.y - @_preStartCursor.y}\n\n    return if Math.abs(offset.x) + Math.abs(offset.y) < 3\n\n    e.preventDefault()\n\n    unless @_dragging\n      @_startCursor = cursor\n      @_startLoc = @_currentLoc = @_getLoc()\n\n    @_currentOffset = offset = {x: cursor.x - @_startCursor.x, y: cursor.y - @_startCursor.y}\n    @_currentLoc = {x: @_startLoc.x + offset.x, y: @_startLoc.y + offset.y}\n    @_currentCursor = {x: -@_startLoc.x + @_startCursor.x + offset.x, y: -@_startLoc.y + @_startCursor.y + offset.y}\n\n    @_start() unless @_dragging\n\n    if @animate\n      cancelAnimFrame(@_frameId)\n      @_frameId = requestAnimFrame(=> @_move())\n    else\n      @_move()\n\n  _mouseup: (e) =>\n    document.removeEventListener(\"mousemove\", @_mousemove)\n    document.removeEventListener(\"touchmove\", @_mousemove)\n    document.removeEventListener(\"mouseup\", @_mouseup)\n    document.removeEventListener(\"touchend\", @_mouseup)\n    cancelAnimFrame(@_frameId) if @animate\n    @_end()\n\n  _start: ->\n    @_dragging = true\n    @_positions = []\n    @_times = []\n    @fire('dragstart', @_state())\n\n  _move: ->\n    @fire('predragmove', @_state())\n\n    time = +new Date()\n    @_positions.push(@_currentLoc.x)\n    @_times.push(time)\n\n    if time - @_times[0] > 200\n      @_positions.shift()\n      @_times.shift()\n\n    @fire('dragmove', @_state())\n\n  _animateEnd: ->\n    dx = @_currentLoc.x - @_positions[0]\n    dt = +new Date() - @_times[0]\n    v = dx/dt\n    @_animateFling(v, .01, +new Date())\n\n  _end: ->\n    if @animate && @_positions?.length > 0\n      @_animateEnd()\n    else\n      @_staticEnd()\n\n  _animateFling: (v, a, t) ->\n    now = +new Date()\n    dt = now - t\n    dv = a*dt\n    if v < 0\n      v += dv\n    else\n      v -= dv\n\n    if dv < Math.abs(v)\n      @_currentLoc.x += v * dt\n      @_currentOffset.x += v * dt\n      @_move()\n      requestAnimFrame =>\n        @_animateFling(v, a, now)\n    else\n      @_staticEnd()\n\n  _staticEnd: ->\n    @_dragging = false\n    @fire('dragEnd', @_state())\n\n  _getLoc: ->\n    # FIXME: y\n    {x: svgUtil.getTransformX(@_element), y: 0}\n\n  _state: ->\n    {start: @_startLoc, offset: @_currentOffset, cursor: @_currentCursor}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/timeline/draggable.coffee\n **/","Draggable = require('./draggable')\nsvgUtil = require('../util/svg')\n\nmodule.exports = class TemporalFencepost extends Draggable\n  constructor: (parent, x, @height) ->\n    @line = svgUtil.buildSvgElement('line')\n    @triangle = svgUtil.buildSvgElement('path')\n\n    @update(x)\n\n    parent.appendChild(@line)\n    parent.appendChild(@triangle)\n\n    super(@triangle, true)\n\n    @on 'dragend', @_onEnd, this\n    @on 'predrag', @_onUpdate, this\n\n\n  dispose: ->\n    {line, triangle} = this\n    @line = @triangle = null\n\n    line.parentNode.removeChild(line)\n    triangle.parentNode.removeChild(triangle)\n    @disable()\n\n  update: (x) ->\n    @x = x\n    y = 0\n    half_w = 10\n    h = 10\n    svgUtil.updateSvgElement(@line, x1: x, y1: y + h, x2: x, y2: @height)\n    svgUtil.updateSvgElement(@triangle, d: \"m#{x - half_w} #{y} l #{half_w} #{h} l #{half_w} #{-h} z\")\n    @fire('update', {x: x})\n    this\n\n  _onUpdate: (e) ->\n    @update(e.cursor.x)\n\n  _onEnd: (e) ->\n    @_onUpdate(e.cursor.x)\n    @fire('commit', x: e.cursor.x)\n    @_startX = null\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/timeline/fencepost.coffee\n **/"],"sourceRoot":""}