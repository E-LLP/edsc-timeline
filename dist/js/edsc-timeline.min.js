!function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return o(i?i:t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){var n,o,s,r,a,h,u,l,c,p,d,f,_,m,g,v,y,w,b,x,T,C,E,S,L,D,M,R,z,P,F,A,O,N,X,k=function(t,e){return function(){return t.apply(e,arguments)}},U=function(t,e){function i(){this.constructor=t}for(var n in e)B.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},B={}.hasOwnProperty,I=[].slice;N=t("./util/string"),O=t("./util/plugin"),M=t("./util/date"),X=t("./util/svg"),o=t("./timeline/draggable"),C=t("./timeline/fencepost"),T=19,w=26,y=14,b=5,g=48,x=T+y+b,n=40,f=6e4,d=60*f,c=24*d,_=31*c,m=366*c,p=10*m,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=-1e5,u=-1e3,r=1e5,a=1e3,F=function(t){return N.padLeft(t.getUTCHours(),"0",2)+":"+N.padLeft(t.getUTCMinutes(),"0",2)},z=function(t){return N.padLeft(t.getUTCDate(),"0",2)},P=function(t){return l[t.getUTCMonth()]},R=function(t){return P(t)+" "+z(t)},A=function(t){return t.getUTCFullYear()},D=function(t,e,i){var n;return n=[t],t===e&&n.push(i()),n},s=[function(t){return D(F(t),"00:00",function(){return R(t)})},function(t){return D(F(t),"00:00",function(){return z(t)+" "+P(t)+" "+A(t)})},function(t){return D(z(t),"01",function(){return P(t)+" "+A(t)})},function(t){return D(P(t),"Jan",function(){return A(t)})},function(t){return[A(t)]},function(t){return[A(t)]},function(t){return[A(t)]}],v=["minute","hour","day","month","year","year","year"],L=[f,d,c,_,m,p,5*p],E=function(){function t(t,e,i,n){this.left=e,this.right=i,this.left.on("update",this.update,this),this.right.on("update",this.update,this),this.rect=X.buildSvgElement("rect",n),t.appendChild(this.rect),this.update()}return t.prototype.dispose=function(){var t,e,i,n;return t=this.left,i=this.right,n=this.update,e=this.rect,t.off("update",n,this),i.off("update",n,this),e.parentNode.removeChild(e),this.rect=null},t.prototype.update=function(t){var e,i;return i=Math.min(this.left.x,this.right.x),e=Math.abs(this.right.x-this.left.x),X.updateSvgElement(this.rect,$.extend({},t,{x:i,width:e})),this},t}(),S=function(t){function e(t,i,n){var o;null==n&&(n={}),this._finishPan=k(this._finishPan,this),this._onLabelMouseout=k(this._onLabelMouseout,this),this._onLabelMouseover=k(this._onLabelMouseover,this),this._onLabelClick=k(this._onLabelClick,this),this._onKeydown=k(this._onKeydown,this),this._onDataMouseout=k(this._onDataMouseout,this),this._onDataMouseover=k(this._onDataMouseover,this),this.data=k(this.data,this),e.__super__.constructor.call(this,t,i,n),this._rows=[],this.root.addClass("timeline"),this.root.attr("tabindex","1"),this.root.append(this._buildDom()),this.root.append(this._createDisplay()),this._data={},this.animate=null!=(o=n.animate)?o:!0,this._zoom=4,this.end=(n.end||new Date)-0,this.start=this.end-L[this._zoom],this.originPx=0,this._loadedRange=[],this._updateTimeline(),this.root.on("click.timeline",this.scope(".date-label"),this._onLabelClick),this.root.on("mouseover.timeline",this.scope(".date-label"),this._onLabelMouseover),this.root.on("mouseout.timeline",this.scope(".date-label"),this._onLabelMouseout),this.root.on("mouseover.timeline",this.scope(".data"),this._onDataMouseover),this.root.on("mouseout.timeline",this.scope(".data"),this._onDataMouseout),this.root.on("keydown.timeline",this._onKeydown),this.root.on("focusout.timeline",function(t){return function(e){return t.root.removeClass("hasfocus"),t._hasFocus=!1,t._forceRedraw()}}(this)),this.root.on("focusin.timeline",function(t){return function(e){var i;return i=document.querySelector(t.scope(".date-label")+":hover"),null!=i&&t._onLabelClick({currentTarget:i}),t.root.addClass("hasfocus"),t._forceRedraw(),setTimeout(function(){return t._hasFocus=!0},500)}}(this))}return U(e,t),e.prototype.destroy=function(){return this.root.find("svg").remove(),this.root.off(".timeline"),e.__super__.destroy.call(this)},e.prototype.range=function(){var t,e,i;return i=this.start,t=this.end,e=t-i,[i-e,t+e,v[this._zoom-2]]},e.prototype.startTime=function(){return this.start},e.prototype.endTime=function(){return this.end},e.prototype.show=function(){return this.root.show(),this._setHeight(),null},e.prototype.hide=function(){return this.root.hide(),this._setHeight(),this.focus(),null},e.prototype.loadstart=function(t,e,i,n){var o;return o=this.root[0].getElementsByClassName(t),o.length>0?(o[0].setAttribute("class",o[0].getAttribute("class")+" "+this.scope("loading")),this._empty(o[0])):void 0},e.prototype.data=function(t,e){var i;return i=this._getRow(t),this._loadedRange=[e.start,e.end,e.resolution],this._data[t]=[e.start,e.end,e.resolution,e.intervals,i.color],this._drawData(t),this._drawIndicators(t),this._drawData(t),this._drawIndicators(t)},e.prototype._drawIndicators=function(t){var e,i,n,o,s,r,a,h,u,l,c,p,d,f;for(p=null,l=this._rows,h=0,u=l.length;u>h&&(p=l[h],p.id!==t);h++);return null!=p?(c=this._data[t],e=c[0],e=c[1],e=c[2],a=c[3],r=c[4],r=null!=r?r:"#25c85b",f=p.min?new Date(1e3*p.min):new Date(0),d=p.max?new Date(1e3*p.max):new Date,s=d<this.start||a.length>0&&1e3*a[a.length-1][1]<this.start,n=f>this.end||a.length>0&&1e3*a[0][0]>this.end,o=s?r:"transparent",i=n?r:"transparent",document.getElementById("arrow-left-"+t).setAttribute("style","fill: "+o),document.getElementById("arrow-right-"+t).setAttribute("style","fill: "+i),null):void 0},e.prototype._drawData=function(t){var e,i,n,o,s,r,a,h,u,l,c,p,d,f,_,m,g,y,b,x,T,C,E,S,L,D;for(u=-1,g=this._rows,h=c=0,d=g.length;d>c;h=++c)if(C=g[h],C.id===t){u=h;break}if(-1!==u){for(D=this._zoom,b=null!=(y=this._data[t])?y:[this.start-1,this.end+1,v[D-2],[],null],E=b[0],s=b[1],T=b[2],l=b[3],n=b[4],_=this.root[0].getElementsByClassName(t),o=null,_.length>0?(o=_[0],this._empty(o),o.parentNode.removeChild(o)):(o=this._buildSvgElement("g"),u>0&&this._translate(o,0,w*u)),p=0,f=l.length;f>p;p++)x=l[p],L=x[0],a=x[1],e=x[2],S=this.timeToPosition(1e3*L),r=this.timeToPosition(1e3*a),i={x:S,y:5,width:r-S,height:w-7,rx:10,ry:10},T!==v[D-2]&&(i["class"]=this.scope("imprecise")),m=this._buildSvgElement("rect",i),null!=n&&m.setAttribute("style","fill: "+n),o.appendChild(m);return o.setAttribute("class",t+" "+this.scope("data")),this.tlRows.appendChild(o),this._drawIndicators(t),null}},e.prototype._onDataMouseover=function(t){var e,i,n,o,s,r,a,h,u,l,c,p,d,f;return f=$(".timeline-tooltip"),e=t.target,n=e.parentNode.className.baseVal.split(" ")[0],u=this._data[n][2],s=this._data[n][3],h=$(t.currentTarget.childNodes),o=s[h.index(e)],c=1e3*o[0],p=1e3*o[1],f.find(".inner").text(this._dateWithResolution(c,u)+" to "+this._dateWithResolution(p,u)),a=e.getScreenCTM(),r=a.e+e.x.baseVal.value,l=r+e.width.baseVal.value,0>r&&(r=0),l>window.innerWidth&&(l=window.innerWidth),f.css("left",(r+l)/2-f.width()/2+"px"),i=a.f,d=$(".timeline").offset().top,f.css("top",i-d-33+"px"),f.show()},e.prototype._onDataMouseout=function(t){return $(".timeline-tooltip").hide()},e.prototype._dateWithResolution=function(t,e){var i,n;return n=M.dateToHumanUTC(t).split(" "),i=v.indexOf(e),i>1&&(n[3]="",n[4]=""),i>2&&(n[0]=""),i>3&&(n[1]=""),n.join(" ")},e.prototype._forceRedraw=function(){var t,e,i;return e=this._buildRect({stroke:"none",fill:"none"}),i=this.svg,i.appendChild(e),t=function(){return i.removeChild(e)},window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t)},e.prototype.refresh=function(){return this.rows(this._rows)},e.prototype.rows=function(t){var e;return(null!=t?t.length:void 0)>0?(this._rows=function(){var i,n,o;for(o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push($.extend({},e));return o}(),this._updateRowNames(),this._drawTemporalBounds(),this._empty(this.tlRows),this._data={},this.show()):this.hide(),this._rows},e.prototype.timeSpanToPx=function(t){return t/this.scale},e.prototype.pxToTimeSpan=function(t){return this.scale/t},e.prototype.timeToPosition=function(t){var e,i,n;return e=this.originPx,n=this.start,i=this.scale,e+(t-n)/i},e.prototype.positionToTime=function(t){var e,i,n;return e=this.originPx,n=this.start,i=this.scale,Math.floor((t-e)*i+n)},e.prototype.zoomIn=function(){return this.root.trigger("buttonzoom"),this._deltaZoom(-1)},e.prototype.zoomOut=function(){return this.root.trigger("buttonzoom"),this._deltaZoom(1)},e.prototype.zoom=function(t){return null!=t?(this._deltaZoom(t-this._zoom),null):this._zoom},e.prototype.center=function(t){return null!=t?(this.panToTime(t+(this.end-this.start)/2),null):Math.round((this.end+this.start)/2)},e.prototype._deltaZoom=function(t,e){var i,n,o;return null==e&&(e=this.center()),this._zoom=Math.min(Math.max(this._zoom+t,2),L.length-1),this.root.toggleClass(this.scope("max-zoom"),this._zoom===L.length-1),this.root.toggleClass(this.scope("min-zoom"),2===this._zoom),o=this.timeToPosition(e),n=L[this._zoom],i=n/this.width,this.start=e-i*(o-this.originPx),this.end=this.start+n,this.scale=i,this.focus(),this._updateTimeline(),this._drawTemporalBounds()},e.prototype.focus=function(t,e){var i,n,o,s,r,a;if(Math.abs(t-this._focus)<1e3){if(!this._hasFocus)return;t=null}return this._focus=t,s=this.root,n=this.focusOverlay,this._empty(n),null!=t?(s.trigger(this.scopedEventName("focusset"),[t,e,v[this._zoom-1]]),r=this.timeToPosition(t),a=this.timeToPosition(e),i=this._buildRect({"class":this.scope("unfocused"),x1:r}),n.appendChild(i),o=this._buildRect({"class":this.scope("unfocused"),x:a}),n.appendChild(o)):s.trigger(this.scopedEventName("focusremove")),this._forceRedraw(),null},e.prototype.panToTime=function(t){return this._pan(this.timeSpanToPx(this.end-t))},e.prototype._getTransformX=X.getTransformX,e.prototype._onKeydown=function(t){var e,i,n,o,s,r,a,h,u,l,c;return n=this._focus,s=t.keyCode,r=37,l=38,a=39,e=40,n&&(s===r||s===a)&&(this.root.trigger("arrowpan"),c=this._zoom-1,o=this._roundTime(n,c,1),s===r?(h=this._roundTime(n,c,-1),u=n-1,i=this.timeSpanToPx(o-n)):(h=o,u=this._roundTime(n,c,2)-1,i=-this.timeSpanToPx(u-h)),this._canFocusTimespan(h,u))?(this._pan(i),this.focus(h,u)):void 0},e.prototype._canFocusTimespan=function(t,e){var i,n,o,s;for(o=this._rows,i=0,n=o.length;n>i;i++)if(s=o[i],!s.canFocusTimespan||s.canFocusTimespan(t,e))return!0;return!1},e.prototype._timespanForLabel=function(t){var e,i,n;return e=t.previousSibling,i=this._getTransformX(t),n=this._getTransformX(e,i),[this.positionToTime(i),this.positionToTime(n)-1]},e.prototype._onLabelClick=function(t){var e,i,n,o;if(!this._dragging)return this.root.trigger("clicklabel"),e=t.currentTarget,i=this._timespanForLabel(e),n=i[0],o=i[1],this._canFocusTimespan(n,o)?this.focus(n,o):void 0},e.prototype._onLabelMouseover=function(t){var e,i,n,o;return e=t.currentTarget,i=this._timespanForLabel(e),n=i[0],o=i[1],this._canFocusTimespan(n,o)?void 0:e.setAttribute("class",this.scope("date-label")+" "+this.scope("nofocus"))},e.prototype._onLabelMouseout=function(t){var e;return e=t.currentTarget,e.setAttribute("class",this.scope("date-label"))},e.prototype._contains=function(t,e,i,n){return i>t&&e>i&&n>t&&e>n},e.prototype._empty=function(t){return $(t).empty()},e.prototype._buildSvgElement=X.buildSvgElement,e.prototype._translate=function(t,e,i){return t.setAttribute("transform","translate("+e+", "+i+")"),t},e.prototype._buildDom=function(){return $('<div class="timeline-tools"> <h1></h1> <div class="timeline-tools-zoom"> <a class="timeline-zoom-in" href="#">+</a> <a class="timeline-zoom-out" href="#">&#8722;</a> </div> </div> <div class="timeline-tooltip top"> <div class="tooltip-arrow"></div> <div class="inner"></div> </div>')},e.prototype._createDisplay=function(){var t,e,i,n,o,s,r;return this.svg=o=this._buildSvgElement("svg",{"class":this.scope("display")}),e=this.root.find(this.scope(".tools")).width(),n=this._createSelectionOverlay(o),this._translate(n,e,0),r=this._buildRect({"class":this.scope("display-top"),y:0,y1:T}),this._setupTemporalSelection(r),this._translate(r,e,0),t=this._createFocusOverlay(o),this._translate(t,e,0),i=this._createFixedOverlay(o),this._translate(i,e,0),s=this._createTimeline(o),this._translate(s,e,0),o.appendChild(s),o.appendChild(r),o.appendChild(i),o.appendChild(n),o.appendChild(t),this._setupDragBehavior(o),this._setupScrollBehavior(o),o},e.prototype._setupTemporalSelection=function(t){var e,i,n,s,r;return r=this,s=this.root,$(t).on("click",function(t){return function(){return s.trigger(t.scopedEventName("temporalchange"),[])}}(this)),e=new o(t,this.animate),i=null,n=null,e.on("dragstart",function(t){return function(e){var o,s,r,a;return o=e.cursor,s=t.selectionOverlay,t._empty(s),r=t._createSelectionRegion(s,o.x,o.x,function(){a=[];for(var e=0,i=t._rows.length;i>=0?i>e:e>i;i>=0?e++:e--)a.push(e);return a}.apply(this)),i=r[0],n=r[1],r}}(this)),e.on("dragmove",function(t){return n._onUpdate(t)}),e.on("dragend",function(t){return s.trigger("createdtemporal"),n._onEnd(t)})},e.prototype._setupScrollBehavior=function(t){var e,i,n,o,s,r,a;return e=!0,s=function(){return e=!1,setTimeout(function(){return e=!0},300)},n=function(e){return function(i){var n,o,s,r;return n=e.root.find(e.scope(".draggable"))[0],o=e._getTransformX(n),r=i.clientX-t.clientLeft-o,s=e.positionToTime(r)}}(this),i=function(t){return function(i,n,o){var r;if(e)return Math.abs(n)>Math.abs(i)?(r=n>0?-1:1,t.root.trigger("scrollzoom"),t._deltaZoom(r,o),s()):0!==i?(t.root.trigger("scrollpan"),t._pan(i)):void 0}}(this),o=function(t){var e,o;return e=t.wheelDeltaX,o=t.wheelDeltaY,i(e,o,n(t)),t.preventDefault()},t.addEventListener("mousewheel",o),t.addEventListener("DOMMouseScroll",o),t.addEventListener("wheel",function(t){var e,o;if("mousewheel"!==t.type)return e=-t.deltaX,o=-t.deltaY,i(e,o,n(t)),t.preventDefault()}),a=0,r=0,t.addEventListener("touchstart",function(t){var e,i;if(t.touches&&2===t.touches.length)return e=(t.touches[0].clientX+t.touches[1].clientX)/2,i=n({clientX:e}),a=Math.abs(t.touches[0].clientX-t.touches[1].clientX),t.preventDefault()}),t.addEventListener("touchmove",function(t){var e;if(t.touches&&2===t.touches.length)return e=Math.abs(t.touches[0].clientX-t.touches[1].clientX)-a,i(0,-e,r)})},e.prototype._setupDragBehavior=function(t){var e,i,n;return n=t.querySelector(this.scope(".draggable")),e=new o(n,this.animate),i=0,e.on("dragmove",function(t){return function(e){return i=e.offset.x,Math.abs(i)>5&&(t._dragging=!0),t._pan(i,!1)}}(this)),e.on("dragend",function(t){return function(e){return i=e.offset.x,t.root.trigger("draggingpan"),t._dragging=!1,t._pan(i)}}(this))},e.prototype._pan=function(t,e){var i,n,o,s;return null==e&&(e=!0),null==this._panStart&&this._startPan(),s=this._panStart,n=this._panEnd,o=n-s,this.start=s-t*this.scale,this.end=this.start+o,this.originPx=-(this._panStartX+t),i=this.root.find([this.scope(".draggable"),this.scope(".selection"),this.scope(".display-top"),this.scope(".focus")].join(", ")),i.attr("transform","translate("+(-this.originPx+g)+",0)"),this._forceRedraw(),e?this._finishPan():void 0},e.prototype._startPan=function(){var t;return t=this.root.find(this.scope(".draggable"))[0],this._panStartX=this._getTransformX(t,g)-g,this._panStart=this.start,this._panEnd=this.end},e.prototype._finishPan=function(){return this._updateTimeline(),this._panStartX=this._panStart=this._panEnd=null},e.prototype._createSelectionOverlay=function(t){return this.selectionOverlay=this._buildSvgElement("g",{"class":this.scope("selection")})},e.prototype._createFocusOverlay=function(t){return this.focusOverlay=this._buildSvgElement("g",{"class":this.scope("focus")})},e.prototype._createFixedOverlay=function(t){var e,i;return this.overlay=e=this._buildSvgElement("g",{"class":this.scope("overlay")}),this.olRows=i=this._buildSvgElement("g",{"class":this.scope("row")}),this._translate(i,5,x),e.appendChild(i),e},e.prototype._createTimeline=function(t){var e,i,n,o;return this.timeline=o=this._buildSvgElement("g",{"class":this.scope("draggable")}),i=this._buildSvgElement("rect",{"class":this.scope("background"),x:h,y:u,width:r-h,height:a-u}),this.tlRows=n=this._buildSvgElement("g"),this._translate(n,0,T),this.axis=e=this._buildSvgElement("g"),this._translate(e,0,T),o.appendChild(i),o.appendChild(e),o.appendChild(n),o},e.prototype._buildIndicatorArrow=function(t,e){var i;return i=this._buildSvgElement("g",{"class":this.scope("indicator"),id:t,transform:e}),i.appendChild(this._buildSvgElement("path",{d:"M 0 -5 L 6 1 L 8 -1 L 4 -5 L 8 -9 L 6 -11 z"})),i.appendChild(this._buildSvgElement("path",{d:"M 5 -5 L 11 1 L 13 -1 L 9 -5 L 13 -9 L 11 -11 z"})),i},e.prototype._updateRowNames=function(){var t,e,i,n,o,s,r,a,h;for(s=this._rows,n=this.olRows,this._empty(n),h=0,r=this._buildSvgElement("g"),e=0,i=s.length;i>e;e++)o=s[e],n.appendChild(this._buildIndicatorArrow("arrow-left-"+o.id,"translate(0, "+h+")")),n.appendChild(this._buildIndicatorArrow("arrow-right-"+o.id,"translate("+(this.width-20)+", "+(h-10)+") rotate(180)")),a=this._buildSvgElement("text",{x:15,y:h}),a.textContent=o.title,r.appendChild(a),h+=w;return n.appendChild(r),t=function(t){return function(){var e,i;return e=r.getBBox(),i=t._buildSvgElement("rect",{x:e.x,y:-y-b,width:e.width,height:h,"class":t.scope("shadow")}),n.firstChild?n.insertBefore(i,n.firstChild):void 0}}(this),setTimeout(t,0),null},e.prototype._updateTimeline=function(){var t,e,i,n,o,s,a,u,l,c,p,d,f,_,m,g,y,w,b,x,T,C;e=this.axis,x=this.timeline,b=this.start,n=this.end,w=this.root,C=this._zoom,this._empty(e),w.find("h1").text(v[C-1]),u=this._buildSvgElement("line",{"class":this.scope("timeline"),x1:h,y1:0,x2:r,y2:0}),e.appendChild(u),i=w.width(),0===i&&(i=$(window).width()),this.width=T=i-w.find(this.scope(".tools")).width(),this.scale=(n-b)/T,f=this.range(),this._drawIntervals(f[0],f[1],C-1),_=this._data;for(s in _)B.call(_,s)&&(t=_[s],this._drawData(s));if(y=f[2],m=this._loadedRange,p=m[0],l=m[1],c=m[2],c!==y||!this._contains(p,l,b,n))for(g=this.tlRows.childNodes,o=0,a=g.length;a>o;o++)d=g[o],d.setAttribute("class",d.getAttribute("class")+" "+this.scope("loading"));return w.trigger(this.scopedEventName("rangechange"),f)},e.prototype.setTemporal=function(t){return this._globalTemporal=t},e.prototype.setRowTemporal=function(t,e){var i;return i=this._getRow(t),i?i.temporal=e:void 0},e.prototype._getRow=function(t){var e,i,n,o;for(n=this._rows,e=0,i=n.length;i>e;e++)if(o=n[e],o.id===t)return o;return null},e.prototype._drawTemporalBounds=function(){var t,e,i,n,o,s,r;if(o=this.selectionOverlay,r=this._rows,this._empty(o),r.length>0){for(t=[],e=i=0,n=r.length;n>i;e=++i)s=r[e],s.temporal?this._createTemporalRegion(o,s.temporal,[e]):t.push(e);return this._globalTemporal?this._createTemporalRegion(o,this._globalTemporal,t):void 0}},e.prototype._createSelectionRegion=function(t,e,i,n){var o,s,r,h,u,l;for(r=new C(t,e,a),u=new C(t,i,a),l=function(){var t,e,i,n;return t=Math.min(r.x,u.x),e=Math.max(r.x,u.x),i=new Date(this.positionToTime(t)),n=new Date(this.positionToTime(e)),this.root.trigger(this.scopedEventName("temporalchange"),i,n),null},r.on("commit",l,this),u.on("commit",l,this),r.on("update",this._forceRedraw,this),u.on("update",this._forceRedraw,this),s=0,h=n.length;h>s;s++)o=n[s],new E(t,r,u,{"class":this.scope("selection-region"),y:T+w*o,height:w});return[r,u]},e.prototype._createTemporalRegion=function(t,e,i){var n,o,s,r,a,h;for(r=[],n=0,o=e.length;o>n;n++)s=e[n],a=s[0],h=s[1],r.push(this._createSelectionRegion(t,this.timeToPosition(a),this.timeToPosition(h),i));return r},e.prototype._buildRect=function(t){return t=$.extend({x:h,x1:r,y:u,y1:a},t),null==t.width&&(t.width=t.x1-t.x|0),null==t.height&&(t.height=t.y1-t.y|0),delete t.x1,delete t.y1,this._buildSvgElement("rect",t)},e.prototype._roundTime=function(t,e,i){var n,o,s;return null==i&&(i=0),t=1e3*Math.round(t/1e3),s=new Date(t),o=function(){var t,e,i,o;for(i=["FullYear","Month","Date","Hours","Minutes"],o=[],t=0,e=i.length;e>t;t++)n=i[t],o.push(s["getUTC"+n]());return o}(),o=o.slice(0,Math.max(o.length-e,1)),e===L.length-2&&(o[0]=10*Math.floor(o[0]/10),i*=10),o[o.length-1]+=i,1===o.length&&o.push(0),Date.UTC.apply(Date,o)},e.prototype._drawIntervals=function(t,e,i){var n,o,r,a,h,u,l;for(n=this.axis,t=this._roundTime(t,i),e=this._roundTime(e,i),l=e,u=[];l>=t;)o=new Date(l),h=this._roundTime(l,i,-1),a=this._roundTime(l,i,1),r=this._buildIntervalDisplay.apply(this,[this.timeToPosition(l),this.timeToPosition(a)].concat(I.call(s[i](o)))),n.appendChild(r),u.push(l=h);return u},e.prototype._buildIntervalDisplay=function(t,e,i,n){var o,s,r,h,l,c,p,d;return r=this._buildSvgElement("g",{"class":this.scope("date-label")}),this._translate(r,t,0),d=e-t,null!=e&&(o=this._buildSvgElement("rect",{x:0,y:0,width:d,height:a-u}),r.appendChild(o)),h=this._buildSvgElement("text",{x:5,y:20,"class":this.scope("axis-label")+" "+this.scope("axis-super-label")}),h.textContent=i,c=this.scope("tick"),n&&(c+=" "+this.scope("interval-start")),l=this._buildSvgElement("line",{"class":c,x1:0,y1:u,x2:0,y2:a}),s=this._buildSvgElement("circle",{"class":this.scope("tick-crossing"),r:6,cx:d}),r.appendChild(l),r.appendChild(s),r.appendChild(h),n&&(p=this._buildSvgElement("text",{x:5,y:34,"class":this.scope("axis-label")+" "+this.scope("axis-sub-label")}),p.textContent=n,r.appendChild(p)),r},e.prototype._setHeight=function(){var t,e,i;return(null!=(t=this._rows)?t.length:void 0)>0?(e=this._rows.length*w+2*b,this._translate(this.axis,0,T+e),i=Math.max(T+e+n,100),this.root.height(i),$(this.svg).height(i)):void 0},e}(O.Base),O.create("timeline",S)},{"./timeline/draggable":2,"./timeline/fencepost":3,"./util/date":4,"./util/plugin":5,"./util/string":6,"./util/svg":7}],2:[function(t,e,i){var n,o,s,r,a,h,u=function(t,e){return function(){return t.apply(e,arguments)}};h=t("../util/svg"),o=function(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]},a=window.requestAnimationFrame||o("RequestAnimationFrame")||function(t){return window.setTimeout(t)},s=window.cancelAnimationFrame||o("CancelAnimationFrame")||o("CancelRequestAnimationFrame")||function(t){return window.clearTimeout(t)},r=function(t){var e,i,n;for(e=t.target,i=n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return i=t.clientX-i,n=t.clientY-n,{x:i,y:n}},e.exports=n=function(){function t(t,e){this.animate=null!=e?e:!0,this._mouseup=u(this._mouseup,this),this._mousemove=u(this._mousemove,this),this._mousedown=u(this._mousedown,this),this._dragging=!1,this._element=t,this.enable()}return t.prototype.dispose=function(){return this.disable()},t.prototype.enable=function(){var t;return t=this._element,t.addEventListener("mousedown",this._mousedown),t.addEventListener("touchstart",this._mousedown)},t.prototype.disable=function(){var t;return t=this._element,t.removeEventListener("mousedown",this._mousedown),t.removeEventListener("touchstart",this._mousedown)},t.prototype.on=function(t,e,i){var n,o,s,r,a;for(null==this._listeners&&(this._listeners={}),null==i&&(i=this),a=t.split(" "),s=0,r=a.length;r>s;s++)o=a[s],null==(n=this._listeners)[o]&&(n[o]=[]),this._listeners[o].push([e,i]);return this},t.prototype.off=function(t,e,i){var n,o,s,r,a,h;for(null==this._listeners&&(this._listeners={}),h=t.split(" "),s=0,r=h.length;r>s;s++)if(n=h[s],a=this._listeners[n],null!=a){for(o=0;o<a.length;)a[o][0]===e&&a[o][1]===i?a.splice(o,1):o++;0===a.length&&delete this._listeners[n]}return this},t.prototype.fire=function(t,e){var i,n,o,s,r,a,h,u;if(console.log(t,JSON.stringify(e)),a=null!=(h=this._listeners)?h[t]:void 0,null==a)return this;for(n=$.extend({},null!=e?e:{},{type:t,target:this}),s=0,r=a.length;r>s;s++)u=a[s],o=u[0],i=u[1],o.call(i,n);return this},t.prototype._mousedown=function(t){var e;if(!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(t.stopPropagation(),!this._dragging))return t=(null!=(e=t.touches)?e[0]:void 0)||t,this._preStartCursor=r(t),document.addEventListener("mousemove",this._mousemove),document.addEventListener("touchmove",this._mousemove),document.addEventListener("mouseup",this._mouseup),document.addEventListener("touchend",this._mouseup)},t.prototype._mousemove=function(t){var e,i,n,o;if(!((null!=(n=t.touches)?n.length:void 0)>1||(t=(null!=(o=t.touches)?o[0]:void 0)||t,e=r(t),i={x:e.x-this._preStartCursor.x,y:e.y-this._preStartCursor.y},Math.abs(i.x)+Math.abs(i.y)<3)))return t.preventDefault(),this._dragging||(this._startCursor=e,this._startLoc=this._currentLoc=this._getLoc()),this._currentOffset=i={x:e.x-this._startCursor.x,y:e.y-this._startCursor.y},this._currentLoc={x:this._startLoc.x+i.x,y:this._startLoc.y+i.y},this._currentCursor={x:-this._startLoc.x+this._startCursor.x+i.x,y:-this._startLoc.y+this._startCursor.y+i.y},this._dragging||this._start(),this.animate?(s(this._frameId),this._frameId=a(function(t){return function(){return t._move()}}(this))):this._move()},t.prototype._mouseup=function(t){return document.removeEventListener("mousemove",this._mousemove),document.removeEventListener("touchmove",this._mousemove),document.removeEventListener("mouseup",this._mouseup),document.removeEventListener("touchend",this._mouseup),this.animate&&s(this._frameId),this._end()},t.prototype._start=function(){return this._dragging=!0,this._positions=[],this._times=[],this.fire("dragstart",this._state())},t.prototype._move=function(){var t;return this.fire("predragmove",this._state()),t=+new Date,this._positions.push(this._currentLoc.x),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift()),this.fire("dragmove",this._state())},t.prototype._animateEnd=function(){var t,e,i;return e=this._currentLoc.x-this._positions[0],t=+new Date-this._times[0],i=e/t,this._animateFling(i,.01,+new Date)},t.prototype._end=function(){var t;return this.animate&&(null!=(t=this._positions)?t.length:void 0)>0?this._animateEnd():this._staticEnd()},t.prototype._animateFling=function(t,e,i){var n,o,s;return s=+new Date,n=s-i,o=e*n,0>t?t+=o:t-=o,o<Math.abs(t)?(this._currentLoc.x+=t*n,this._currentOffset.x+=t*n,this._move(),a(function(i){return function(){return i._animateFling(t,e,s)}}(this))):this._staticEnd()},t.prototype._staticEnd=function(){return this._dragging=!1,this.fire("dragEnd",this._state())},t.prototype._getLoc=function(){return{x:h.getTransformX(this._element),y:0}},t.prototype._state=function(){return{start:this._startLoc,offset:this._currentOffset,cursor:this._currentCursor}},t}()},{"../util/svg":7}],3:[function(t,e,i){var n,o,s,r=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=t("./draggable"),s=t("../util/svg"),e.exports=o=function(t){function e(t,i,n){this.height=n,this.line=s.buildSvgElement("line"),this.triangle=s.buildSvgElement("path"),this.update(i),t.appendChild(this.line),t.appendChild(this.triangle),e.__super__.constructor.call(this,this.triangle,!0),this.on("dragend",this._onEnd,this),this.on("predrag",this._onUpdate,this)}return r(e,t),e.prototype.dispose=function(){var t,e;return t=this.line,e=this.triangle,this.line=this.triangle=null,t.parentNode.removeChild(t),e.parentNode.removeChild(e),this.disable()},e.prototype.update=function(t){var e,i,n;return this.x=t,n=0,i=10,e=10,s.updateSvgElement(this.line,{x1:t,y1:n+e,x2:t,y2:this.height}),s.updateSvgElement(this.triangle,{d:"m"+(t-i)+" "+n+" l "+i+" "+e+" l "+i+" "+-e+" z"}),this.fire("update",{x:t}),this},e.prototype._onUpdate=function(t){return this.update(t.cursor.x)},e.prototype._onEnd=function(t){return this._onUpdate(t.cursor.x),this.fire("commit",{x:t.cursor.x}),this._startX=null},e}(n)},{"../util/svg":7,"./draggable":2}],4:[function(t,e,i){i.dateToHumanUTC=function(t){var e,i,n,o;return null!==t&&"undefined"!=typeof t?(o=new Date(t).toUTCString(),n=o.substring(o.length-3),i=o.replace(/^\S+\s/,"").replace(/:[^:]*$/,""),e=i+" "+n):e="Unknown",e}},{}],5:[function(t,e,i){var n,o,s,r,a,h={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},l=[].slice;a=t("./string"),o=function(t,e,i,n){return function(o){var s,r,a;return r=$(this),(r.is("a")||0===$(o.target).closest("a").length)&&(s=r.closest(i),0===s.length&&(a=r.attr("href"),null!=a&&a.length>1&&(s=$(a))),s[t](e,r.attr(n))),!1}},r=function(t,e){var i,n,s,r,l,c,p,d,f,_,m;m=["constructor","destroy"],i=$(document),c=a.dasherize(t),f="."+c,p=e.prototype,d=[];for(l in p)h.call(p,l)&&(s=p[l],u.call(m,l)>=0||0===l.indexOf("_")?d.push(void 0):(n=c+"-"+a.dasherize(l),_="."+n,r=o(t,l,f,"data-"+n),d.push(i.on("click",_,r))));return d},s=function(t,e){return e.noClickHandlers||r(t,e),$.fn[t]=function(){var i,n,o,s,r,a,h,u;return i=1<=arguments.length?l.call(arguments,0):[],i.length>0&&"string"==typeof i[0]?(a=i,r=a[0],i=2<=a.length?l.call(a,1):[],h=function(){var e,a,h,c;for(c=[],e=0,a=this.length;a>e;e++)o=this[e],s=$.data(o,t),s?/^debug_/.test(r)?(h=r.split("_"),u=h[0],n=2<=h.length?l.call(h,1):[],c.push(s[n.join("_")])):"destroy"===r?($.removeData(o,t),"function"==typeof(null!=s?s.destroy:void 0)?c.push(s.destroy()):c.push(void 0)):/^_/.test(r)||"function"!=typeof(null!=s?s[r]:void 0)?(console.error("Could not call "+r+" on "+t+" instance:",o),c.push(null)):c.push(s[r].apply(s,i)):(console.warn(t+" not found on element"),c.push(o));return c}.call(this),h[0]):i.length<2?this.each(function(){var n,o;return o=i[0],null==$.data(this,t)?(n=new e($(this),t,o),$.data(this,t,n)):void 0}):(console.error("Bad arguments to "+t+":",i),this)}},n=function(){function t(t,e,i){this.root=t,this.namespace=e,this._options=i,this.cssScope=a.dasherize(this.namespace)}return t.prototype.destroy=function(){},t.prototype.scope=function(t,e){var i,n,o,s,r;for(null==e&&(e={}),r=[".","is-"],i="",n=0,o=r.length;o>n;n++)s=r[n],0===t.indexOf(s)&&(i+=s,t=t.substring(s.length));return""+i+this.cssScope+"-"+t},t.prototype.scopedEventName=function(t){return t+"."+this.namespace},t}(),i.create=s,i.Base=n},{"./string":6}],6:[function(t,e,i){i.padLeft=function(t,e,i){for(t=""+t,e=""+e;t.length<i;)t=e+t;return t},i.dasherize=function(t){return t.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").replace(/\A-/g,"").replace(/-\Z/g,"").toLowerCase()},i.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},{}],7:[function(t,e,i){var n=function(t){return t.getAttribute("transform")||t.parentNode.getAttribute("transform")||""},o=function(t,e){var i;if(null!=e)for(i in e)e.hasOwnProperty(i)&&null!=e[i]&&t.setAttribute(i,e[i]);return t};i.updateSvgElement=o,i.buildSvgElement=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return o(i,e)},i.getTransformX=function(t,e){var i,o;return o=e||0,t&&(i=/^[^\d\-]*(-?[\d\.]+)/.exec(n(t)),i&&i[1]&&(o=parseFloat(i[1]))),o}},{}]},{},[1]);
//# sourceMappingURL=edsc-timeline.min.js.map